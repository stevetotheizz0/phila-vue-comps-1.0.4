{"version":3,"file":"phila-vue-comps.js","sources":["../src/components/AddressCandidateList.vue","../src/components/AddressInput.vue","../src/components/TopicComponent.vue","../src/components/AnyHeader.vue","../src/components/Badge.vue","../src/util/unique-id.js","../src/components/ButtonComp.vue","../src/components/Callout.vue","../src/components/CollectionSummary.vue","../src/components/Division.vue","../src/util/generate-billing-xml.js","../src/components/ePayForm.vue","../src/components/HorizontalTableRow.vue","../src/components/HorizontalTable.vue","../src/components/Image.vue","../src/components/VerticalTable.vue","../src/components/OverlayToggleGroup.vue","../src/components/Paragraph.vue","../src/components/SpanComp.vue","../src/components/List.vue","../src/components/TabGroup.vue","../src/components/HorizontalTableGroup.vue","../src/components/Topic.vue","../src/components/TopicSet.vue","../src/components/TopicComponentGroup.vue","../src/components/BadgeCustom.vue","../src/components/FullScreenTopicsToggleTab.vue","../src/components/Greeting.vue","../src/components/LegendBox.vue","../src/components/Slider.vue","../src/components/Checkbox.vue","../src/main.js"],"sourcesContent":["<template>\r\n  <div :class=\"this.listGroupClass\"\r\n       v-show=\"this.shouldShowAddressCandidateList\"\r\n       :style=\"this.listStyle\"\r\n  >\r\n  <!-- :style=\"'width: ' + this.inputWidth + 'px;'\" -->\r\n    <ul>\r\n      <li v-for=\"(candidate, i) in candidates\">\r\n        <a :href=\"createLink(candidate)\"\r\n           @click=\"closeAddressCandidateList(candidate)\"\r\n           class=\"list-group-item\"\r\n           tabindex=\"-1\"\r\n           :id=\"'address-candidate-list-' + i\"\r\n           @keydown=\"maybeUsedArrow\"\r\n        >\r\n          {{ candidate }}\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  export default {\r\n    data() {\r\n      const data = {\r\n        listStyle: {\r\n          'width': '250px'\r\n        }\r\n      }\r\n      return data;\r\n    },\r\n    created() {\r\n      window.addEventListener('resize', this.handleWindowResize);\r\n      this.handleWindowResize();\r\n    },\r\n    watch: {\r\n      addressEntered(nextValue) {\r\n        this.handleWindowResize();\r\n      }\r\n    },\r\n    props: [\r\n      'widthFromConfig',\r\n    ],\r\n    computed: {\r\n      inputWidth() {\r\n        return this.$props.widthFromConfig - 55;\r\n      },\r\n      candidates() {\r\n        const autocompleteMax = this.$config.addressInput.autocompleteMax\r\n        if (!autocompleteMax) {\r\n          return this.$store.state.candidates;\r\n        } else {\r\n          let candidates = this.$store.state.candidates.slice(0, autocompleteMax);\r\n          return candidates;\r\n        }\r\n      },\r\n      shouldShowAddressCandidateList() {\r\n        return this.$store.state.shouldShowAddressCandidateList;\r\n      },\r\n      activeTopic() {\r\n        return this.$store.state.activeTopic;\r\n      },\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n      addressAutocompleteEnabled() {\r\n        // TODO this is temporarily disabled\r\n        if (this.$config.addressInput) {\r\n          if (this.$config.addressInput.autocompleteEnabled === true) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      listGroupClass() {\r\n        if (this.isMobileOrTablet) {\r\n          if (this.addressAutocompleteEnabled) {\r\n            if (this.addressEntered === '' || this.addressEntered === null) {\r\n              return 'list-group-mobile';\r\n            } else {\r\n              return 'list-group-mobile-full';\r\n            }\r\n          } else {\r\n            return 'list-group-mobile';\r\n          }\r\n        } else {\r\n          if (this.addressAutocompleteEnabled) {\r\n            if (this.addressEntered === '' || this.addressEntered === null) {\r\n              return 'list-group';\r\n            } else {\r\n              return 'list-group-full';\r\n            }\r\n          } else {\r\n            return 'list-group';\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      createLink(candidate) {\r\n        if (this.$store.state.activeTopic) {\r\n          return '#/' + candidate + '/' + this.activeTopic;\r\n        } else {\r\n          return '#/' + candidate;\r\n        }\r\n      },\r\n      maybeUsedArrow(e) {\r\n        const id = e.target.id;\r\n        const index = parseInt(id.substring(id.lastIndexOf('-') + 1));\r\n        let indexUp, indexDown;\r\n        if (index < this.candidates.length - 1) {\r\n          indexUp = index + 1;\r\n        } else (\r\n          indexUp = index\r\n        )\r\n        if (index !== 0) {\r\n          indexDown = index - 1;\r\n        } else {\r\n          indexDown = 0\r\n        }\r\n        // console.log('maybeUsedArrow running, e:', e, 'index:', index, 'indexUp:', indexUp, 'indexDown:', indexDown);\r\n        if (e.key === \"ArrowDown\") {\r\n          document.getElementById('address-candidate-list-' + indexUp).focus();\r\n        }\r\n        if (e.key === \"ArrowUp\") {\r\n          document.getElementById('address-candidate-list-' + indexDown).focus();\r\n        }\r\n      },\r\n      closeAddressCandidateList(addressCandidate) {\r\n        console.log('AddressCandidateList.vue closeAddressCandidateList is running, addressCandidate:', addressCandidate);\r\n        // this.$controller.handleSearchFormSubmit(addressCandidate);\r\n        this.$store.commit('setAddressEntered', addressCandidate);\r\n        this.$store.commit('setShouldShowAddressCandidateList', false);\r\n      },\r\n      handleWindowResize(addressEntered) {\r\n        if ($(window).width() >= 850) {\r\n          this.listStyle.width = this.$props.widthFromConfig - 55 + 'px';\r\n        } else if ($(window).width() >= 750) {\r\n          this.listStyle.width = this.$props.widthFromConfig - 155 + 'px';\r\n        } else {\r\n          this.listStyle.width = '248px';\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.list-group {\r\n  display: inline-block;\r\n  height: 300px;\r\n  width: 250px;\r\n  overflow: auto;\r\n  margin-top: 1px !important;\r\n}\r\n\r\n/* .list-group-full {\r\n  display: inline-block;\r\n  height: 300px;\r\n  width: 197px;\r\n  overflow: auto;\r\n  margin-top: 1px !important;\r\n} */\r\n\r\n/* .list-group-mobile {\r\n  display: inline-block;\r\n  height: 300px;\r\n  width: 250px;\r\n  overflow: auto;\r\n  margin-top: 1px !important;\r\n}\r\n\r\n.list-group-mobile-full {\r\n  display: inline-block;\r\n  height: 300px;\r\n  width: 197px;\r\n  overflow: auto;\r\n  margin-top: 1px !important;\r\n} */\r\n\r\nul {\r\n  list-style-type: none;\r\n  margin-left: 0px;\r\n}\r\n\r\n.list-group-item {\r\n  /* width: 237px; */\r\n  display: block;\r\n  border-radius: 2px;\r\n  box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02);\r\n  border: 2;\r\n  background-color: white;\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n  padding-left: 10px;\r\n  font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n}\r\n\r\n.list-group-item:hover {\r\n  background-color: #ffefa2;\r\n  font-weight: bold;\r\n}\r\n\r\n/*small*/\r\n@media screen and (max-width: 39.9375em) {\r\n  .list-group {\r\n    width: 200px;\r\n  }\r\n\r\n  .list-group-mobile {\r\n    width: 200px;\r\n  }\r\n\r\n  .list-group-full {\r\n    width: 147px;\r\n  }\r\n\r\n  .list-group-mobile-full {\r\n    width: 158px;\r\n  }\r\n}\r\n\r\n</style>\r\n","<template>\r\n  <div :class=\"'pvc-search-control-container ' + this.containerClass\"\r\n       :style=\"this.containerStyle\"\r\n  >\r\n    <form @submit.prevent=\"handleSearchFormSubmit\"\r\n          autocomplete=\"off\"\r\n          id=\"search-form\"\r\n          class=\"pvc-search-control-form\"\r\n    >\r\n      <input :class=\"'pvc-search-control-input ' + this.inputClass\"\r\n             id=\"pvc-search-control-input\"\r\n             :style=\"this.inputStyle\"\r\n             :placeholder=\"this.$props.placeholder || 'Search the map'\"\r\n             :value=\"this.addressEntered\"\r\n             tabindex=\"0\"\r\n             @keyup=\"didType\"\r\n      />\r\n    </form>\r\n    <button :class=\"'pvc-search-control-button ' + this.buttonClass\"\r\n            v-if=\"this.addressAutocompleteEnabled && this.addressEntered != '' && this.addressEntered != null\"\r\n            @click=\"handleFormX\"\r\n    >\r\n      <i class=\"fa fa-times fa-lg\"></i>\r\n    </button>\r\n    <button :class=\"'pvc-search-control-button ' + this.buttonClass\"\r\n            tabindex=\"-1\"\r\n            @click=\"this.handleSearchFormSubmit\"\r\n    >\r\n      <i class=\"fa fa-search fa-lg\"></i>\r\n    </button>\r\n    <slot name=\"address-candidates-slot\">\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import _ from 'lodash';\r\n  import debounce from 'lodash.debounce';\r\n  import axios from 'axios';\r\n\r\n  export default {\r\n    props: [\r\n      'widthFromConfig',\r\n      'placeholder',\r\n    ],\r\n    data() {\r\n      const data = {\r\n        containerStyle: {\r\n          'width': '305px',\r\n        },\r\n        inputStyle: {\r\n          'width': '250px',\r\n        }\r\n      }\r\n      return data;\r\n    },\r\n    created() {\r\n      window.addEventListener('resize', this.handleWindowResize);\r\n      this.handleWindowResize();\r\n    },\r\n    watch: {\r\n      addressEntered(nextValue) {\r\n        this.handleWindowResize();\r\n      }\r\n    },\r\n    computed: {\r\n      addressEntered() {\r\n        return this.$store.state.addressEntered;\r\n      },\r\n      inputWidth() {\r\n        if (this.addressAutocompleteEnabled) {\r\n          if (this.addressEntered === '' || this.addressEntered === null) {\r\n            return this.$props.widthFromConfig - 55;\r\n          } else {\r\n            return this.$props.widthFromConfig - 108;\r\n          }\r\n        } else {\r\n          return this.$props.widthFromConfig - 55;\r\n        }\r\n      },\r\n      inputClass() {\r\n        if (this.isMobileOrTablet) {\r\n          return 'pvc-input-mobile';\r\n        } else {\r\n          return 'pvc-input-non-mobile';\r\n        }\r\n      },\r\n      containerClass() {\r\n        if (this.isMobileOrTablet) {\r\n          return 'pvc-container-mobile';\r\n        } else {\r\n          return 'pvc-container-non-mobile';\r\n        }\r\n      },\r\n      buttonClass() {\r\n        if (this.isMobileOrTablet) {\r\n          return 'pvc-button-mobile'\r\n        } else {\r\n          return 'pvc-button-non-mobile'\r\n        }\r\n      },\r\n      addressAutocompleteEnabled() {\r\n        // TODO this is temporarily disabled\r\n        if (this.$config.addressInput) {\r\n          if (this.$config.addressInput.autocompleteEnabled === true) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n    },\r\n    methods: {\r\n      didType: _.debounce(function (e) {\r\n          // console.log('debounce is running');\r\n          if (this.addressAutocompleteEnabled) {\r\n            // console.log('debounce is running, e:', e, 'this:', this);\r\n            if (e.key === \"ArrowDown\") {\r\n              document.getElementById('address-candidate-list-0').focus();\r\n              return;\r\n            }\r\n            const { value } = e.target;\r\n            this.getCandidates(value);\r\n            this.$store.commit('setAddressEntered', value);\r\n            if (e.key !== \"Enter\") {\r\n              console.log('AddressInput.vue didType is running, e.key !== \"Enter\"');\r\n              this.$store.commit('setShouldShowAddressCandidateList', true);\r\n            }\r\n          }\r\n        }, 300\r\n      ),\r\n      getCandidates(address) {\r\n        // console.log('getCandidates is running, address:', address);\r\n        axios.get('https://cqvfg1pm72.execute-api.us-east-1.amazonaws.com/dev/first-api-test/', {\r\n          params: {\r\n            address,\r\n          },\r\n        })\r\n          .then(this.didGetCandidates)\r\n          .catch(this.didGetCandidatesError);\r\n      },\r\n      didGetCandidates(res) {\r\n        const { matches } = res.data;\r\n        // console.log('matches:', matches, 'matches map:', matches.map(x => x.address));\r\n        const matchesArray = matches.map(x => x.address);\r\n        this.$store.commit('setCandidates', matchesArray);\r\n      },\r\n      didGetCandidatesError(err) {\r\n        console.log('error getting candidates', err);\r\n        this.$store.commit('setCandidates', []);\r\n      },\r\n      handleFormX() {\r\n        this.$store.commit('setAddressEntered', '');\r\n        this.$store.commit('setShouldShowAddressCandidateList', false);\r\n        this.$store.commit('setCandidates', []);\r\n      },\r\n      handleSearchFormSubmit() {\r\n        let value;\r\n        if (this.addressAutocompleteEnabled){\r\n          value = this.$store.state.addressEntered;\r\n        } else {\r\n          value = $('#pvc-search-control-input').val();\r\n        }\r\n        // console.log('phila-vue-comps AddressInput.vue, handleSearchFormSubmit is running, value:', value);\r\n        this.$controller.handleSearchFormSubmit(value);\r\n        this.$store.commit('setAddressEntered', value);\r\n      },\r\n      handleWindowResize() {\r\n        const addressEntered = this.addressEntered;\r\n        // console.log('AddressInput.vue handleWindowResize is running', $(window).width(), 'addressEntered:', addressEntered);\r\n        if ($(window).width() >= 850) {\r\n          this.containerStyle.width = this.$props.widthFromConfig + 'px';\r\n          if (addressEntered === '' || addressEntered === null) {\r\n            this.inputStyle.width = this.$props.widthFromConfig - 55 + 'px';\r\n          } else {\r\n            this.inputStyle.width = this.$props.widthFromConfig - 108 + 'px';\r\n          }\r\n        } else if ($(window).width() >= 750) {\r\n          this.containerStyle.width = this.$props.widthFromConfig - 100 + 'px';\r\n          if (addressEntered === '' || addressEntered === null) {\r\n            this.inputStyle.width = this.$props.widthFromConfig - 155 + 'px';\r\n          } else {\r\n            this.inputStyle.width = this.$props.widthFromConfig - 208 + 'px';\r\n          }\r\n        } else {\r\n          this.containerStyle.width = '300px';\r\n          if (addressEntered === '' || addressEntered === null) {\r\n            this.inputStyle.width = '245px';\r\n          } else {\r\n            this.inputStyle.width = '192px';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.pvc-search-control-form {\r\n  display: inline-block;\r\n}\r\n\r\n/* Container */\r\n\r\n.pvc-search-control-container {\r\n  display: inline-block;\r\n  border-radius: 2px;\r\n  box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02);\r\n  width: 305px;\r\n}\r\n\r\n.pvc-container-non-mobile {\r\n  height: 48px;\r\n}\r\n\r\n.pvc-container-mobile {\r\n  height: 38px;\r\n}\r\n\r\n\r\n/* Input */\r\n\r\n.pvc-search-control-input {\r\n  display: inline-block;\r\n  border: 0;\r\n  padding: 15px;\r\n  font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n  font-size: 16px;\r\n  width: 250px;\r\n}\r\n\r\n.pvc-input-non-mobile {\r\n  height: 48px;\r\n}\r\n\r\n.pvc-input-mobile {\r\n  height: 38px;\r\n}\r\n\r\n\r\n/* Button */\r\n\r\n.pvc-search-control-button {\r\n  display: inline-block;\r\n  color: #fff;\r\n  background: #2176d2;\r\n  padding: 0px;\r\n  width: 50px;\r\n}\r\n\r\n.pvc-button-non-mobile {\r\n  height: 48px;\r\n  line-height: 48px;\r\n}\r\n\r\n.pvc-button-mobile {\r\n  height: 38px;\r\n  line-height: 38px;\r\n  padding-top: 1px;\r\n}\r\n\r\n\r\n</style>\r\n","<script>\r\n  export default {\r\n    props: ['slots', 'options', 'item'],\r\n    beforeCreate() {\r\n      // console.log('TopicComponent.vue beforeCreate is running, this:', this);\r\n    },\r\n    created() {\r\n      // console.log('TopicComponent.vue created is running, this.$props.slots:', this.$props.slots);\r\n    },\r\n    computed: {\r\n      nullValue() {\r\n        const options = this.options || {};\r\n        return options.nullValue;\r\n      },\r\n    },\r\n    methods: {\r\n      evaluateSlot(valOrGetter, transforms = [], nullValue = '') {\r\n        // check for null val/getter\r\n        if (!valOrGetter) {\r\n          return valOrGetter;\r\n        }\r\n\r\n        const valOrGetterType = typeof valOrGetter;\r\n        let val;\r\n\r\n        // fn\r\n        if (valOrGetterType === 'function') {\r\n          const state = this.$store.state;\r\n          const getter = valOrGetter;\r\n\r\n          // const getterText = String(getter);\r\n          // const depsRe = /state(\\.\\w+)+/g;\r\n          // const depsText = getterText.match(depsRe);\r\n          // const deps = depsText.map(eval);\r\n\r\n          const item = this.item;\r\n          // console.log('in evaluateSlot, item:', item);\r\n\r\n          // if this comp is associated with an \"item\" (generally some object\r\n          // from a list of things, e.g. dor parcels), pass the item itself\r\n          // as well when evaluating\r\n          if (item) {\r\n            val = getter(state, item);\r\n          } else {\r\n            val = getter(state);\r\n            // console.log('state:', state, 'val:', val);\r\n          }\r\n        } else {\r\n          val = valOrGetter;\r\n        }\r\n\r\n        // format nulls but not falses\r\n        if (val === false) {\r\n\r\n        } else if (!val) {\r\n          return nullValue;\r\n        }\r\n\r\n        // apply transforms\r\n        for (let transformKey of transforms) {\r\n          // get transform definition from config by name\r\n          const transform = this.$config.transforms[transformKey];\r\n          // make object of (relevant) globals by filtering window object\r\n          let globals;\r\n          const globalKeys = transform.globals;\r\n          if (globalKeys) {\r\n            globals = Object.keys(window)\r\n                          .filter(key => globalKeys.includes(key))\r\n                          .reduce((obj, key) => {\r\n                              obj[key] = window[key];\r\n                              return obj;\r\n                          }, {});\r\n          }\r\n          // run transform\r\n          const fn = transform.transform;\r\n          val = fn(val, globals);\r\n        }\r\n\r\n        return val;\r\n      },\r\n\r\n      // not sure how children can use this. `this` isn't binding correctly at\r\n      // the time the child gets instantiated.\r\n      // getComputedProperties() {\r\n      //   const slots = this.slots;\r\n      //   return Object.keys(slots).reduce((o, key) => {\r\n      //     const valOrGetter = slots[key];\r\n      //     // wrap slot val/getter in evaluator fn\r\n      //     o[key] = () => {\r\n      //       this.evaluateSlot(valOrGetter);\r\n      //     }\r\n      //     return o;\r\n      //   }, {});\r\n      // }\r\n    },\r\n  };\r\n</script>\r\n","<template>\r\n  <div>\r\n    <h1 :style=\"this.style\"\r\n         v-html=\"this.message\"\r\n         v-if=\"this.headerType === 'h1'\"\r\n    />\r\n    <h2 :style=\"this.style\"\r\n         v-html=\"this.message\"\r\n         v-if=\"this.headerType === 'h2'\"\r\n    />\r\n    <h3 :style=\"this.style\"\r\n         v-html=\"this.message\"\r\n         v-if=\"this.headerType === 'h3'\"\r\n    />\r\n    <h4 :style=\"this.style\"\r\n         v-html=\"this.message\"\r\n         v-if=\"this.headerType === 'h4'\"\r\n    />\r\n    <h5 :style=\"this.style\"\r\n         v-html=\"this.message\"\r\n         v-if=\"this.headerType === 'h5'\"\r\n    />\r\n    <h6 :style=\"this.style\"\r\n         v-html=\"this.message\"\r\n         v-if=\"this.headerType === 'h6'\"\r\n    />\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    computed: {\r\n      headerType() {\r\n        return this.$props.options.headerType;\r\n      },\r\n      additionalTags() {\r\n        return this.$props.slots.additionalTags || [];\r\n      },\r\n      message() {\r\n        // if there is a transform, it needs this textWithTags section\r\n        let textWithTags = ''\r\n        for (let tag of this.additionalTags) {\r\n          textWithTags = textWithTags + '<' + tag + '>';\r\n        }\r\n        textWithTags = textWithTags + this.evaluateSlot(this.$props.slots.text, this.$props.slots.transforms);\r\n        for (let tag of this.additionalTags) {\r\n          textWithTags = textWithTags + '</' + tag + '>';\r\n        }\r\n        return textWithTags;\r\n      },\r\n      style() {\r\n        if (this.$props.options) {\r\n          return this.$props.options.style || '';\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<template>\r\n  <!-- REVIEW this uses patterns -->\r\n  <div class=\"mb-badge panel center\">\r\n    <div class=\"mb-badge-header\" :style=\"style\">\r\n      {{ evaluateSlot(slots.title) }}\r\n    </div>\r\n    <div class=\"mb-badge-body\">\r\n      <h1>{{ evaluateSlot(slots.value) }}</h1>\r\n      <strong>{{ evaluateSlot(slots.description) }}</strong>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // console.log('in Badge.vue script');\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    computed: {\r\n      style() {\r\n        const titleBackgroundValOrFn = (this.options || {}).titleBackground;\r\n        let titleBackground;\r\n\r\n        if (titleBackgroundValOrFn) {\r\n          if (typeof titleBackgroundValOrFn === 'function') {\r\n            titleBackground = titleBackgroundValOrFn(this.$store.state);\r\n          } else {\r\n            titleBackground = titleBackgroundValOrFn;\r\n          }\r\n        } else {\r\n          titleBackground = '#444';\r\n        }\r\n\r\n        return { background: titleBackground };\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .mb-badge {\r\n    /*width: 300px;*/\r\n    padding: 0;\r\n    margin: 0 auto;\r\n    margin-bottom: inherit;\r\n  }\r\n\r\n  @media (max-width: 640px) {\r\n    .mb-badge {\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  /*REVIEW this should use foundation classes*/\r\n  @media (min-width: 640px) {\r\n    .mb-badge {\r\n      width: 325px;\r\n    }\r\n  }\r\n\r\n  .mb-badge-header {\r\n    color: #fff;\r\n    font-weight: bold;\r\n    text-align: center;\r\n    padding-top: 2px;\r\n    padding-bottom: 2px;\r\n  }\r\n\r\n  .mb-badge-body {\r\n    padding: 12px;\r\n  }\r\n\r\n  .mb-badge-body > h1 {\r\n    margin: 0;\r\n    margin-bottom: 5px;\r\n  }\r\n</style>\r\n","function generateUniqueId() {\r\n  return Math.random().toString(36).substring(7);\r\n}\r\n\r\nexport default generateUniqueId;\r\n","<template>\r\n  <a href=\"#\"\r\n     :class=\"'button ' + this.class\"\r\n     :style=\"this.style\"\r\n     @click.prevent=\"evaluateSlot(slots.buttonAction)\"\r\n  >\r\n    {{ message }}\r\n  </a>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    computed: {\r\n      message() {\r\n        if (this.$props.slots) {\r\n          return this.evaluateSlot(this.$props.slots.text);\r\n        }\r\n      },\r\n      class() {\r\n        if (this.$props.options) {\r\n          return this.$props.options.class || '';\r\n        }\r\n      },\r\n      style() {\r\n        if (this.$props.options) {\r\n          return this.$props.options.style || '';\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<template>\r\n  <div class='wrapper grid-y'>\r\n    <!-- <div class=\"callout columns small-24\"> -->\r\n    <div :class=\"'callout ' + this.calloutClass\">\r\n      <p v-if=\"this.message\"\r\n         v-html=\"this.message\"\r\n      />\r\n      <topic-component-group :topic-components=\"this.components\"\r\n                             v-if=\"this.components\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n  import TopicComponentGroup from './TopicComponentGroup.vue'\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    computed: {\r\n      calloutClass() {\r\n        if (this.$props.options) {\r\n          if (this.$props.options.class) {\r\n            return this.$props.options.class;\r\n          } else {\r\n            return 'columns small-24';\r\n          }\r\n        }\r\n      },\r\n      message() {\r\n        if (this.$props.slots) {\r\n          return this.evaluateSlot(this.$props.slots.text) || '';\r\n        } else {\r\n          return '';\r\n        }\r\n      },\r\n      components() {\r\n        if (this.$props.options) {\r\n          return this.$props.options.components || null;\r\n        } else {\r\n          return null;\r\n        }\r\n      },\r\n    },\r\n    components: {},\r\n    beforeCreate() {\r\n      this.$options.components.TopicComponentGroup = TopicComponentGroup;\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.wrapper {\r\n\r\n}\r\n\r\n.callout {\r\n  /* position: inherit; */\r\n  height: auto;\r\n}\r\n\r\n</style>\r\n","<!-- A natural-language summary of a collection of things. -->\r\n\r\n<template>\r\n  <h3>\r\n    {{ summary }}\r\n  </h3>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    computed: {\r\n      // the final stringified output\r\n      summary() {\r\n        // get value quantity map\r\n        const valueQuantities = this.valueQuantities;\r\n        // check if plural\r\n        const isPlural = this.isPlural(valueQuantities);\r\n        // get context renderer\r\n        const contextFnKey = 'context' + (isPlural ? 'Plural' : 'Singular');\r\n        const contextFn = this[contextFnKey];\r\n        // get a natural list\r\n        const naturalList = this.naturalList;\r\n        // summarize\r\n        const summary = contextFn(naturalList);\r\n\r\n        return summary;\r\n      },\r\n      contextSingular() {\r\n        const context = this.options.context;\r\n        return context.singular || context;\r\n      },\r\n      contextPlural() {\r\n        const context = this.options.context;\r\n        return context.plural || context;\r\n      },\r\n      descriptorSingular() {\r\n        const descriptor = this.options.descriptor;\r\n        return descriptor.singular || descriptor;\r\n      },\r\n      descriptorPlural() {\r\n        const descriptor = this.options.descriptor;\r\n        return descriptor.plural || descriptor + 's';\r\n      },\r\n      // serializes naturalized quantities into a list\r\n      // e.g. \"1 apple and 2 oranges\"\r\n      naturalList() {\r\n        const valueQuantities = this.valueQuantities;\r\n        const items = this.naturalizeQuantities(valueQuantities);\r\n        const len = items.length;\r\n        if (Array.isArray(items) && len > 0) {\r\n          if (len === 1) {\r\n            return items[0];\r\n          } else if (len === 2) {\r\n            return items.join(' and ');\r\n          }\r\n          const leadingItems = items.slice(0, items.length - 1).join(', ');\r\n          const lastItem = items[items.length - 1];\r\n          return `${leadingItems}, and ${lastItem}`;\r\n        }\r\n        // TODO should this text be an option?\r\n        return `no ${this.descriptorPlural}`;\r\n      },\r\n      valueQuantities() {\r\n        const items = this.slots.items(this.$store.state);\r\n        const getValue = this.options.getValue;\r\n\r\n        // make an object of value => quantity\r\n        const valueQuantities = items.reduce((obj, item) => {\r\n          const val = getValue(item);\r\n          obj[val] = obj[val] || 0;\r\n          obj[val]++;\r\n          return obj;\r\n        }, {});\r\n\r\n        return valueQuantities;\r\n      },\r\n    },\r\n    methods: {\r\n      // takes the value of the valueQuantities computed property and returns\r\n      // the appropriate grammatical number.\r\n      isPlural(valueQuantities = {}) {\r\n        const values = Object.keys(valueQuantities);\r\n        if (values.length === 1) {\r\n          const firstValue = values[0];\r\n          const quantity = valueQuantities[firstValue];\r\n          if (quantity === 1) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      },\r\n      // takes the value quantity map and converts values to natural language\r\n      // quantities (e.g. {apple: 2} => \"2 apples\")\r\n      naturalizeQuantities(valueQuantities = {}) {\r\n        // get some options\r\n        const types = this.options.types;\r\n        const includeZeroes = this.options.includeZeroes;\r\n\r\n        // convert to natural language and sort per order of types option\r\n        const quantities = types.reduce((acc, type) => {\r\n          const value = type.value;\r\n          let quantity = valueQuantities[value] || 0;\r\n\r\n          if (quantity === 0) {\r\n            if (!includeZeroes) {\r\n              return acc;\r\n            }\r\n            // natural zero => \"no\"\r\n            quantity = 'no';\r\n          }\r\n\r\n          const labelSingular = type.label;\r\n          let labelWithNumber;\r\n\r\n          // singular\r\n          if (quantity !== 1) {\r\n            const labelPlural = type.plural || labelSingular + 's';\r\n            labelWithNumber = labelPlural;\r\n          // plural\r\n          } else {\r\n            labelWithNumber = labelSingular;\r\n          }\r\n\r\n          // make label and push\r\n          const quantityWithLabel = `${quantity} ${labelWithNumber}`;\r\n          acc.push(quantityWithLabel);\r\n\r\n          return acc;\r\n        }, []);\r\n\r\n        return quantities;\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<template>\r\n  <div :class=\"this.class\"\r\n       :style=\"this.style\"\r\n  >\r\n    <topic-component-group :topic-components=\"this.$props.options.components\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n  import TopicComponentGroup from './TopicComponentGroup.vue'\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    computed: {\r\n      message() {\r\n        return this.evaluateSlot(this.$props.slots.text)\r\n      },\r\n      class() {\r\n        return this.$props.options.class || '';\r\n      },\r\n      style() {\r\n        return this.$props.options.style || '';\r\n      },\r\n    },\r\n    components: {},\r\n    beforeCreate() {\r\n      this.$options.components.TopicComponentGroup = TopicComponentGroup;\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\n</style>\r\n","import moment from 'moment';\r\nimport escapeHtml from 'escape-html';\r\n\r\n/*\r\n  this is a helper fn that accepts a data object containing the following:\r\n\r\n    - accountNum <String>\r\n    - amountDue <Number>\r\n    - owner <String>\r\n    - address <Object>\r\n      - streetAddress <String>\r\n      - city <String>\r\n      - state <String>\r\n      - postalCode <String>\r\n      - country <String>\r\n\r\n  and returns a serialized xml object which the epay gateway can accept for\r\n  initiating a purchase.\r\n\r\n  REVIEW does this need to handle credits?\r\n*/\r\n\r\nexport default function (data) {\r\n  console.log('generate billing xml', data);\r\n\r\n  // if data object is empty, return empty string\r\n  if (Object.keys(data).length < 1) {\r\n    return '';\r\n  }\r\n\r\n  // get the current date/time in iso format with timezone\r\n  const timestamp = moment().format();\r\n\r\n  // TODO use a json to xml lib instead of forming this string?\r\n  const xmlString = `<?xml version=\"1.0\" encoding=\"utf-16\"?>\r\n<BillingStatement xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">\r\n  <ApplicationID>fcd68fd2-e923-4b03-a0e7-a678c2ed612a</ApplicationID>\r\n  <AccountNumber />\r\n  <BillNumber>${data.balances.accountNum}</BillNumber>\r\n  <StatementNumber />\r\n  <BillingDate>${timestamp}</BillingDate>\r\n  <DueDate>${timestamp}</DueDate>\r\n  <TotalDue>${data.totalDue}</TotalDue>\r\n  <DepartMentId>0</DepartMentId>\r\n  <Fund>0</Fund>\r\n  <PaymentDate>0001-01-01T00:00:00</PaymentDate>\r\n  <Quantity>0</Quantity>\r\n  <ItemAmount>0</ItemAmount>\r\n  <TotalAmountdue>0</TotalAmountdue>\r\n  <PartialPaymentFlag>false</PartialPaymentFlag>\r\n  <ReceiptpresentFlag>false</ReceiptpresentFlag>\r\n  <Details>\r\n    <BillingStatementDetail>\r\n      <ItemDate>${timestamp}</ItemDate>\r\n      <ItemDescription>Real Estate Tax</ItemDescription>\r\n      <Charges>${data.totalDue}</Charges>\r\n      <Credits>0</Credits>\r\n    </BillingStatementDetail>\r\n  </Details>\r\n  <Customers>\r\n    <Customer>\r\n      <FirstName>${data.balances.property.ownerName}</FirstName>\r\n      <MiddleName />\r\n      <LastName />\r\n      <BillingAddress>\r\n        <Address>\r\n          <AddressLine1>${data.address.streetAddress}</AddressLine1>\r\n          <City>PHILADELPHIA</City>\r\n          <State>PA</State>\r\n          <PostalCode>${data.address.zipCode}</PostalCode>\r\n          <Country>US</Country>\r\n        </Address>\r\n      </BillingAddress>\r\n    </Customer>\r\n  </Customers>\r\n</BillingStatement>\r\n  `;\r\n\r\n  return escapeHtml(xmlString);\r\n};\r\n","<template>\r\n  <form action=\"https://test-secure.phila.gov/PaymentCenter/Gateway1/InitiatePurchase.aspx\"\r\n        method=\"post\"\r\n        target=\"_blank\"\r\n  >\r\n  <input name=\"billStmt\"\r\n         type=\"hidden\"\r\n         :value=\"xmlData\"\r\n  >\r\n  <input type=\"submit\"\r\n         class=\"button external\"\r\n         value=\"Pay Now\"\r\n         v-show=\"this.shouldShowButton\"\r\n  >\r\n  </form>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n  import generateBillingXml from '../util/generate-billing-xml';\r\n\r\n  const BALANCE_PARTS = [\r\n    'principal',\r\n    'interest',\r\n    'penalty',\r\n    'other',\r\n  ];\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    data() {\r\n      const data = {\r\n        parseData: {\r\n          'accountNum': this.$store.state.sources.tips.data.data.accountNum,\r\n          'totalDue': '',\r\n          'balances': this.$store.state.sources.tips.data.data,\r\n          'address': {\r\n            'streetAddress':  this.$store.state.sources.tips.data.data.property.address,\r\n            'zipCode': this.$store.state.geocode.data.properties.zip_code,\r\n          }\r\n        },\r\n        xmlData: {},\r\n      }\r\n      return data;\r\n    },\r\n    created() {\r\n      this.parseData.totalDue = this.calculateTotalDue();\r\n      this.$store.commit('setPropertyBalance', this.parseData.totalDue);\r\n      this.xmlData = generateBillingXml(this.parseData);\r\n    },\r\n    computed: {\r\n      message() {\r\n        if (this.$props.slots) {\r\n          return this.evaluateSlot(this.$props.slots.text);\r\n        }\r\n      },\r\n      class() {\r\n        if (this.$props.options) {\r\n          return this.$props.options.class || '';\r\n        }\r\n      },\r\n      style() {\r\n        if (this.$props.options) {\r\n          return this.$props.options.style || '';\r\n        }\r\n      },\r\n      shouldShowButton() {\r\n        if (this.parseData.totalDue > 0) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n    },\r\n    methods: {\r\n      calculateTotalDue() {\r\n        return this.parseData.balances.years.reduce((acc, year) => {\r\n          const yearTotal = this.calculateTotalForYear(year);\r\n          return acc + yearTotal;\r\n        }, 0);\r\n      },\r\n      calculateTotalForYear(year) {\r\n        const amounts = BALANCE_PARTS.map(part => year[part]);\r\n        return amounts.reduce((acc, amount) => acc + amount, 0);\r\n      },\r\n    },\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<template>\r\n  <tr :class=\"{ active: this.isActive }\"\r\n      @mouseover=\"handleRowMouseover\"\r\n      @click=\"handleRowClick\"\r\n      @mouseout=\"handleRowMouseout\"\r\n  >\r\n    <td v-for=\"field in fields\"\r\n        v-html=\"evaluateSlot(field.value, field.transforms, field.nullValue)\"\r\n    />\r\n  </tr>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    props: ['fields', 'hasOverlay', 'tableId'],\r\n    computed: {\r\n      activeFeature() {\r\n        return this.$store.state.activeFeature;\r\n      },\r\n      isActive() {\r\n        return this.activeFeature.featureId === this.$props.item._featureId && this.$props.tableId === this.activeFeature.tableId;\r\n      },\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n    },\r\n    watch: {\r\n      isActive(value) {\r\n        if (value === true) {\r\n          const el = this.$el;\r\n          const visible = this.isElementInViewport(el);\r\n          // console.log('horizontaltablerow WATCH isActive is firing, el:', el, 'visible:', visible);\r\n\r\n          // console.log('visible?', visible ? 'YES' : 'NO');\r\n\r\n          if (!visible) {\r\n            el.scrollIntoView();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      handleRowMouseover(e) {\r\n        // console.log('handleRowMouseover is starting');\r\n        if(!this.isMobileOrTablet) {\r\n          // console.log('handleRowMouseover actions are running');\r\n          if (!this.hasOverlay) return;\r\n\r\n          const featureId = this.item._featureId;\r\n          const tableId = this.tableId;\r\n          this.$store.commit('setActiveFeature', { featureId, tableId });\r\n        }\r\n      },\r\n      handleRowClick(e) {\r\n        // console.log('handleRowClick is starting');\r\n        if(this.isMobileOrTablet) {\r\n          // console.log('handleRowClick actions are running');\r\n          if (!this.hasOverlay) return;\r\n\r\n          const featureId = this.item._featureId;\r\n          const tableId = this.tableId;\r\n          this.$store.commit('setActiveFeature', { featureId, tableId });\r\n        }\r\n      },\r\n      handleRowMouseout(e) {\r\n        // console.log('handleRowMouseout is starting');\r\n        // if(!this.isMobileOrTablet) {\r\n          // console.log('handleRowMouseout actions are running');\r\n          if (!this.hasOverlay) return;\r\n          this.$store.commit('setActiveFeature', null);\r\n        // }\r\n      },\r\n      // REVIEW there's very similar code in the controller. if these can be\r\n      // the same thing, make it into a util.\r\n      isElementInViewport(el) {\r\n        const rect = el.getBoundingClientRect();\r\n\r\n        // console.log('bounding box', rect);\r\n\r\n        const visibility = {\r\n          // TODO the 108 below is account for the combined height of the\r\n          // app header and address header. this is not a good long-term\r\n          // solution - instead, use the `bottom` value of the address header's\r\n          // bounding rect. however, this should only fire on small devices,\r\n          // which would require again hard-coding screen breakpoints from\r\n          // standards or some other magic, which might not a huge\r\n          // improvement in terms of decoupling logic and presentation. hmm.\r\n          top: rect.top >= 108,\r\n          left: rect.left >= 0,\r\n          bottom: rect.bottom <= (window.innerHeight || document.documentElement.clientHeight),\r\n          right: rect.right <= (window.innerWidth || document.documentElement.clientWidth),\r\n        };\r\n\r\n        // console.log('visibility', visibility);\r\n\r\n        // return if all sides are visible\r\n        return Object.values(visibility).every(val => val);\r\n      },\r\n      featuresMatch(a, b) {\r\n        return a.featureId === b.featureId && a.tableId === b.tableId;\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .active {\r\n    background: #F3D661;\r\n  }\r\n\r\n  td {\r\n    font-size: 15px;\r\n    text-align: left;\r\n  }\r\n</style>\r\n","<template>\r\n  <div class=\"pvc-horizontal-table\">\r\n    <!-- <button v-if=\"shouldShowButton\"\r\n    >\r\n      Text\r\n    </button> -->\r\n    <div v-if=\"shouldShowTable\">\r\n      <!-- controls -->\r\n      <div class=\"pvc-horizontal-table-controls\"\r\n           v-if=\"shouldShowFilters !== false\"\r\n      >\r\n        <div v-if=\"!!options.filters\"\r\n             class=\"vertically-centered\"\r\n        >\r\n          <!-- TODO the ids for filter spans should incorporate some sort of topic comp\r\n          to make them globally unique -->\r\n          <div v-for=\"(filter, index) in filters\"\r\n                :id=\"'filter-' + index\"\r\n                class=\"inline-block\"\r\n          >\r\n            <div class=\"vertically-centered pvc-select-text\">{{ filter.label }}</div>\r\n            <select @change=\"handleFilterValueChange\"\r\n                    class=\"pvc-select\"\r\n            >\r\n              <optgroup>\r\n                <option v-for=\"filterValue in filter.values\"\r\n                        :value=\"slugifyFilterValue(filterValue)\"\r\n                        class=\"pvc-select-option\"\r\n                >\r\n                  {{ filterValue.label }}\r\n                </option>\r\n              </optgroup>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- <div v-if=\"!!this.$props.options.sort && !!this.$props.options.sort.select\" -->\r\n        <div v-if=\"!!options.sort && !!options.sort.select\"\r\n             class=\"vertically-centered\"\r\n        >\r\n          <div class=\"vertically-centered pvc-select-text\">Sort by</div>\r\n          <select @change=\"handleSortValueChange\"\r\n                  class=\"pvc-select\"\r\n          >\r\n            <optgroup>\r\n              <option v-for=\"sortField in sortFields\"\r\n                      :value=\"sortField\"\r\n                      class=\"pvc-select-option\"\r\n              >\r\n                {{ sortField }}\r\n              </option>\r\n            </optgroup>\r\n          </select>\r\n\r\n        </div>\r\n\r\n        <div v-if=\"filterByTextFields\"\r\n             class=\"vertically-centered\"\r\n        >\r\n          <div class=\"pvc-select-text inline-block\">\r\n            {{ options.filterByText.label }}\r\n          </div>\r\n          <form @submit.prevent=\"handleFilterFormX\"\r\n                class=\"inline-block filter-by-text-form\"\r\n          >\r\n            <input :class=\"this.inputClass\"\r\n                   id=\"theInput\"\r\n                   @keyup=\"handleFilterFormKeyup\"\r\n            />\r\n            <button class=\"pvc-search-control-button\"\r\n                    v-if=\"this.searchText != ''\"\r\n            >\r\n              <i class=\"fa fa-times fa-lg\"></i>\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div> <!-- end of pvc-horizontal-table-controls block -->\r\n\r\n      <div :class=\"{ 'pvc-horizontal-table-body': true, 'no-padding': !shouldShowFilters }\">\r\n        <div v-if=\"slots.title\">\r\n          <h4 style=\"display:inline-block\">\r\n            {{ evaluateSlot(slots.title) }} {{ countText }}\r\n          </h4>\r\n          <h5 style=\"display:inline-block; color: gray\">\r\n            {{ evaluateSlot(slots.subtitle) }}\r\n          </h5>\r\n          <a class=\"button pvc-download-data-button\"\r\n                  v-if=\"this.shouldShowDownloadButton\"\r\n                  @click=\"this.exportTableToCSV\"\r\n          >\r\n            Download Data\r\n          </a>\r\n        </div>\r\n\r\n        <table role=\"grid\" class=\"stack\">\r\n          <thead v-if=\"shouldShowHeaders !== false\">\r\n            <tr>\r\n              <th v-for=\"field in fields\">{{ evaluateSlot(field.label) }}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <horizontal-table-row v-for=\"item in itemsLimited\"\r\n                                  :item=\"item\"\r\n                                  :fields=\"fields\"\r\n                                  :key=\"item._featureId\"\r\n                                  :hasOverlay=\"hasOverlay\"\r\n                                  :tableId=\"options.tableId\"\r\n            />\r\n          </tbody>\r\n        </table>\r\n\r\n        <!-- external link (aka \"see more\")-->\r\n        <div class=\"external-link\"\r\n             v-if=\"options.externalLink && shouldShowExternalLink\"\r\n        >\r\n          <a :href=\"externalLinkHref\"\r\n             class=\"external\"\r\n             target=\"_blank\"\r\n          >\r\n            {{ externalLinkText }}\r\n          </a>\r\n        </div>\r\n      </div>\r\n\r\n      <a class=\"button center-button\"\r\n         @click=\"this.showMoreRecords\"\r\n         v-if=\"this.shouldShowRetrieveButton\"\r\n      >\r\n        Retrieve {{ this.nextIncrement }} More {{ this.nextIncrement === 1? 'Record' : 'Records' }}\r\n        <span v-show=\"secondaryStatus === 'waiting'\" class=\"loading\">\r\n          <i class=\"fa fa-spinner fa-lg spin\"></i>\r\n        </span>\r\n      </a>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n  import HorizontalTableRow from './HorizontalTableRow.vue';\r\n  import moment from 'moment';\r\n  // import json2csv from 'json2csv';\r\n  // import fs from 'fs';\r\n\r\n  const DEFAULT_SORT_FIELDS = [\r\n    'distance',\r\n    'date',\r\n  ];\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    data() {\r\n      const filters = this.options.filters || [];\r\n      const filtersKeys = Object.keys(filters);\r\n      // console.log('in horiz table data, filters:', filters, 'filtersKeys:', filtersKeys);\r\n      // const defaultFilterSelections = Object.keys(filters).reduce((acc, i) =>\r\n      //                                 {\r\n      //                                   const key = `filter-${i}`;\r\n      //                                   console.log('in reduce, i:', i, 'acc:', acc, 'key:', key, 'acc[key]:', acc[key]);\r\n      //                                   acc[key] = {};\r\n      //                                   return acc;\r\n      //                                 }, {});\r\n      let defaultFilterSelections = {}\r\n      for (let index=0; index < filters.length; index++) {\r\n        defaultFilterSelections['filter-' + index] = filters[index].values[0];\r\n      }\r\n      // console.log('in horiz table data, filters:', filters, 'filtersKeys:', filtersKeys, 'defaultFilterSelections:', defaultFilterSelections);\r\n      let sortFields;\r\n      if (this.options.sort){\r\n        sortFields = this.options.sort.sortFields || [];\r\n      }\r\n      let sortField;\r\n      if (sortFields) {\r\n        sortField = sortFields[0]\r\n      } else {\r\n        sortField = DEFAULT_SORT_FIELDS[0]\r\n      }\r\n      const highestRowRetrieved = this.options.defaultIncrement;\r\n\r\n      const initialData = {\r\n        filterSelections: defaultFilterSelections,\r\n        searchText: '',\r\n        sortField,\r\n        highestRowRetrieved\r\n      };\r\n\r\n      return initialData;\r\n    },\r\n    components: {\r\n      HorizontalTableRow\r\n    },\r\n    created() {\r\n      // console.log('horiz table created props slots items', this.$props.slots.items);\r\n      if (this.filters) {\r\n        for (let [index, filter] of this.filters.entries()) {\r\n          const key = `filter-${index}`;\r\n          const defaultValue = filter.values[0] || {};\r\n          this.filterSelections[key] = defaultValue;\r\n        }\r\n      }\r\n\r\n      // put row data in state once on load\r\n      // const data = this.itemsAfterSearch;\r\n      // const tableId = this.options.tableId;\r\n\r\n      // this.$store.commit('setHorizontalTableFilteredData', {\r\n      //   tableId,\r\n      //   data\r\n      // });\r\n    },\r\n    mounted() {\r\n      // console.log('horiz table mounted props slots items', this.$props.slots.items);\r\n      this.updateTableFilteredData();\r\n    },\r\n    watch: {\r\n      itemsAfterFilters(nextItems) {\r\n        // console.log('WATCH items after filters', nextItems);\r\n        // this.$nextTick(() => {\r\n        this.updateTableFilteredData();\r\n        // })\r\n      }\r\n    },\r\n    computed: {\r\n      shouldShowFilters() {\r\n        if (typeof this.options.shouldShowFilters === 'undefined') {\r\n          return true;\r\n        } else {\r\n          return this.options.shouldShowFilters;\r\n        }\r\n      },\r\n      shouldShowHeaders() {\r\n        if (typeof this.options.shouldShowHeaders === 'undefined') {\r\n          return true;\r\n        } else {\r\n          return this.options.shouldShowHeaders;\r\n        }\r\n      },\r\n      shouldShowDownloadButton() {\r\n        let downloadButton = false;\r\n        if (this.options.downloadButton) {\r\n          downloadButton = this.options.downloadButton;\r\n        }\r\n        return downloadButton;\r\n      },\r\n      secondaryStatus() {\r\n        return this.$store.state.sources[this.options.id].secondaryStatus;\r\n      },\r\n      shouldShowTable() {\r\n        let result = true;\r\n\r\n        // if the table is in a tab group or table group, it will have an \"item\" in props\r\n        // if (this.item) {\r\n        //   // if it is in a table group, the item will contain an \"activeTable\" for the group\r\n        //   if (this.item.activeTable) {\r\n        //     const id = this.options.id;\r\n        //     if (this.item.activeTable != id) {\r\n        //       result = false\r\n        //     }\r\n        //   }\r\n        // }\r\n        // if there is no data, and the table should not show at all if it is empty\r\n        if (this.$props.options.showOnlyIfData && this.items.length === 0) {\r\n          result = false;\r\n        }\r\n\r\n        return result;\r\n      },\r\n      shouldShowRetrieveButton() {\r\n        return this.highestRowRetrieved < this.count;\r\n      },\r\n      leftToRetrieve() {\r\n        return this.count - this.highestRowRetrieved;\r\n      },\r\n      nextIncrement() {\r\n        if (!this.options.showAllRowsOnFirstClick) {\r\n          if (this.leftToRetrieve < this.options.defaultIncrement) {\r\n            return this.leftToRetrieve;\r\n          } else {\r\n            return this.options.defaultIncrement;\r\n          }\r\n        } else {\r\n          return this.leftToRetrieve;\r\n        }\r\n      },\r\n      highestPageRetrieved() {\r\n        return this.evaluateSlot(this.slots.highestPageRetrieved);\r\n      },\r\n      pageCount() {\r\n        return this.evaluateSlot(this.slots.pageCount);\r\n      },\r\n      totalSize() {\r\n        return this.evaluateSlot(this.slots.totalSize);\r\n      },\r\n      limit() {\r\n        return this.options.limit;\r\n      },\r\n      // REVIEW what does this do? can this be simplified?\r\n      inputClass() {\r\n        if (this.searchText === '') {\r\n          return 'pvc-search-control-input';\r\n        } else {\r\n          return 'pvc-search-control-input-full';\r\n        }\r\n      },\r\n      filters() {\r\n        return this.options.filters;\r\n      },\r\n      activeFilters() {\r\n        //TODO make this work with not-always-on filters\r\n        return this.filters;\r\n      },\r\n      fields() {\r\n        return this.options.fields;\r\n      },\r\n      hasOverlay() {\r\n        return !!this.options.mapOverlay;\r\n      },\r\n      items() {\r\n        const itemsSlot = this.slots.items;\r\n        const items = this.evaluateSlot(itemsSlot) || [];\r\n        // console.log('horiz table items', items);\r\n        return items\r\n      },\r\n      filterByTextFields() {\r\n        if (this.options.filterByText) {\r\n          return this.options.filterByText.fields;\r\n        } else {\r\n          return null;\r\n        }\r\n      },\r\n      itemsAfterSearch() {\r\n        // console.log('itemsAfterSearch is running');\r\n        const items = this.items;\r\n        const searchText = this.searchText;\r\n\r\n        if (!searchText) {\r\n          return items;\r\n        }\r\n\r\n        const searchTextLower = searchText.toLowerCase();\r\n\r\n        // get full set of items\r\n\r\n        // if text search is not enabled, return all items\r\n        const searchFields = this.filterByTextFields || [];\r\n        if (searchFields.length === 0) {\r\n          return items;\r\n        }\r\n\r\n        // get items that contain the search text in one of their filter fields\r\n        const matchingItems = items.filter(item => {\r\n          const searchVals = searchFields.map(filterField => {\r\n            const props = item.properties;\r\n            const searchVal = props ? props[filterField] : item[filterField];\r\n            // console.log('props', props, 'searchVal', searchVal);\r\n            return searchVal.toLowerCase();\r\n          });\r\n\r\n          let boolean = false;\r\n          for (let searchVal of searchVals) {\r\n            // console.log('searchVal', searchVal, 'searchTextLower', searchTextLower);\r\n            if (searchVal.includes(searchTextLower)) {\r\n              boolean = true;\r\n            }\r\n          }\r\n          return boolean;\r\n        })\r\n\r\n        return matchingItems;\r\n      },\r\n      // this takes itemsAfterSearch and applies selected filters\r\n      itemsAfterFilters() {\r\n        // console.log('itemsAfterFilters is running, this.filters:', this.filters, 'this.filterSelections:', this.filterSelections);\r\n        const itemsAfterSearch = this.itemsAfterSearch;\r\n        const items = this.filterItems(itemsAfterSearch,\r\n                                       this.filters,\r\n                                       this.filterSelections);\r\n        // console.log('horiz table itemsAfterFilters', items);\r\n        return items;\r\n      },\r\n      itemsAfterSort() {\r\n        const itemsAfterFilters = this.itemsAfterFilters;\r\n        const sortOpts = this.options.sort;\r\n        return this.sortItems(itemsAfterFilters, sortOpts);\r\n      },\r\n      sortFields() {\r\n        if (this.options.sort.sortFields) {\r\n          return this.options.sort.sortFields;\r\n        } else {\r\n          return DEFAULT_SORT_FIELDS;\r\n        }\r\n      },\r\n      // this takes filtered items and applies the max number of rows\r\n      itemsLimited() {\r\n        // console.log('items limited', this.itemsAfterSort.slice(0, this.limit));\r\n        if (this.options.limit) {\r\n          return this.itemsAfterSort.slice(0, this.options.limit);\r\n        } else if (this.options.defaultIncrement) {\r\n          return this.itemsAfterSort.slice(0, this.highestRowRetrieved);\r\n        } else {\r\n          return this.itemsAfterSort;\r\n        }\r\n      },\r\n      count() {\r\n        if (this.$props.options.useApiCount) {\r\n          return this.totalSize;\r\n        } else {\r\n          return this.itemsAfterFilters.length;\r\n        }\r\n      },\r\n      countText() {\r\n        if (this.$props.options.noCount) {\r\n          return '';\r\n        } else if (this.highestRowRetrieved < this.count) {\r\n          return `(1 - ${ this.count < this.highestRowRetrieved ? this.count : this.highestRowRetrieved } of ${this.count})`;\r\n        } else {\r\n          return `(${this.count})`;\r\n        }\r\n      },\r\n      shouldShowExternalLink() {\r\n        if (this.options.externalLink.forceShow) {\r\n          return this.options.externalLink.forceShow;\r\n        } else {\r\n          return this.itemsAfterSearch.length > this.limit;\r\n        }\r\n      },\r\n      externalLinkAction() {\r\n        return this.options.externalLink.action || 'See more';\r\n      },\r\n      externalLinkText() {\r\n        const externalLinkConf = this.options.externalLink;\r\n        const actionFn = externalLinkConf.action;\r\n        const actionText = actionFn(this.externalLinkCount);\r\n        const name = externalLinkConf.name;\r\n\r\n        return `${actionText}`;\r\n        // return `${actionText} at ${name}`;\r\n      },\r\n      externalLinkHref() {\r\n        return this.evaluateSlot(this.options.externalLink.href);\r\n      },\r\n      // the number of items that aren't being shown (e.g. See 54 more...)\r\n      externalLinkCount() {\r\n        return this.count - this.limit;\r\n      },\r\n    },\r\n    methods: {\r\n      exportTableToCSV() {\r\n        // console.log('exportTableToCSV is running');\r\n\r\n        // const Json2csvParser = require('json2csv').Parser;\r\n\r\n        const tableData = []\r\n        for (let item of this.items) {\r\n          // console.log('item:', item);\r\n          let object = {\r\n            'address': item.properties.ADDRESS,\r\n            'distance': item._distance\r\n          }\r\n          tableData.push(object);\r\n        }\r\n        const fields = ['address', 'distance'];\r\n        const opts = { fields };\r\n\r\n        try {\r\n          // const parser = new Json2csvParser(opts);\r\n          var result, ctr, keys, columnDelimiter, lineDelimiter, data;\r\n\r\n          data = tableData || null;\r\n          if (data == null || !data.length) {\r\n              return null;\r\n          }\r\n\r\n          columnDelimiter = ',';\r\n          lineDelimiter = '\\n';\r\n          // columnDelimiter = args.columnDelimiter || ',';\r\n          // lineDelimiter = args.lineDelimiter || '\\n';\r\n\r\n          keys = Object.keys(data[0]);\r\n\r\n          result = '';\r\n          result += keys.join(columnDelimiter);\r\n          result += lineDelimiter;\r\n\r\n          data.forEach(function(item) {\r\n              ctr = 0;\r\n              keys.forEach(function(key) {\r\n                  if (ctr > 0) result += columnDelimiter;\r\n\r\n                  result += item[key];\r\n                  ctr++;\r\n              });\r\n              result += lineDelimiter;\r\n          });\r\n\r\n          let csv = result;\r\n          // console.log('csv', csv);\r\n          // let csv = parser.parse(tableData);\r\n          data = null;\r\n          let filename;\r\n          let link;\r\n\r\n          // filename = 'export.csv';\r\n          filename = this.$props.options.downloadFile + '.csv' || 'export.csv';\r\n\r\n          if (!csv.match(/^data:text\\/csv/i)) {\r\n              csv = 'data:text/csv;charset=utf-8,' + csv;\r\n          }\r\n          data = encodeURI(csv);\r\n\r\n          link = document.createElement('a');\r\n          link.setAttribute('href', data);\r\n          link.setAttribute('download', filename);\r\n          link.click();\r\n\r\n        } catch (err) {\r\n          console.error(err);\r\n        }\r\n\r\n      },\r\n      showMoreRecords() {\r\n        // if there is only 1 page to return (from AIS);\r\n        if (!this.pageCount) {\r\n          this.compareAndSetHighestRowRetrieved();\r\n        // if there are multiple pages to return (from AIS) and there are not enough items in the table state (itemsFiltered) to cover the increment;\r\n        } else if (this.itemsAfterFilters.length < this.highestRowRetrieved + this.options.defaultIncrement) {\r\n          // if there is another page to return (from AIS)\r\n          if (this.pageCount > this.highestPageRetrieved) {\r\n            this.getMoreRecords();\r\n            this.compareAndSetHighestRowRetrieved();\r\n          // if there are no more pages to return (from AIS)\r\n          } else {\r\n            this.highestRowRetrieved = this.count;\r\n          }\r\n        // if there are multiple pages to return (from AIS) but there are already enough items in the table state (itemsFiltered) to cover the increment;\r\n        } else {\r\n          if (!this.options.showAllRowsOnFirstClick) {\r\n            this.highestRowRetrieved = this.highestRowRetrieved + this.options.defaultIncrement;\r\n          } else {\r\n            this.highestRowRetrieved = this.count;\r\n          }\r\n        }\r\n      },\r\n      compareAndSetHighestRowRetrieved() {\r\n        if (!this.options.showAllRowsOnFirstClick) {\r\n          if (this.count < this.highestRowRetrieved + this.options.defaultIncrement) {\r\n            this.highestRowRetrieved = this.count;\r\n          } else {\r\n            this.highestRowRetrieved = this.highestRowRetrieved + this.options.defaultIncrement;\r\n          }\r\n        } else {\r\n          this.highestRowRetrieved = this.count;\r\n        }\r\n      },\r\n      getMoreRecords() {\r\n        const dataSource = this.options.id;\r\n        const highestPageRetrieved = this.highestPageRetrieved;\r\n        this.$controller.getMoreRecords(dataSource, highestPageRetrieved);\r\n      },\r\n      slugifyFilterValue(filterValue) {\r\n        const { direction, value, unit } = filterValue;\r\n        return [direction, value, unit].join('-');\r\n      },\r\n      deslugifyFilterValue(slug) {\r\n        const parts = slug.split('-');\r\n        const [direction, value, unit] = parts;\r\n        return {value, unit, direction};\r\n      },\r\n      handleSortValueChange(e) {\r\n        // console.log('handleSortValueChange running', e);\r\n\r\n        const value = e.target.value;\r\n        this.sortField = value;\r\n      },\r\n      handleFilterValueChange(e) {\r\n        console.log('handle filter value change', e);\r\n\r\n        const target = e.target;\r\n        const slug = target.value;\r\n\r\n        // deslugify filter value\r\n        const valueObj = this.deslugifyFilterValue(slug);\r\n\r\n        const parent = target.parentElement;\r\n        const parentId = parent.id;\r\n\r\n        // patch and replace filter selections\r\n        const prevFilterSelections = this.filterSelections;\r\n        const nextFilterSelections = Object.assign({}, prevFilterSelections);\r\n        nextFilterSelections[parentId] = valueObj;\r\n        this.filterSelections = nextFilterSelections;\r\n      },\r\n      values(item) {\r\n        const fields = this.options.fields;\r\n        const sourceFields = fields.map(field => field.sourceField);\r\n        return sourceFields.map(sourceField => item[sourceField])\r\n      },\r\n      handleFilterFormKeyup(e) {\r\n        const input = e.target.value;\r\n        this.searchText = input;\r\n      },\r\n      handleFilterFormX(e) {\r\n        e.target[0].value = ''\r\n        this.searchText = \"\";\r\n      },\r\n      filterItems(items, filters, filterSelections) {\r\n        // console.log('typeof items:', typeof items);\r\n        // console.log('FILTER ITEMS is running, items:', items, 'filters:', filters, 'filterSelections:', filterSelections);\r\n        let itemsFiltered = items.slice();\r\n\r\n        if (filters) {\r\n          // console.log('in filterItems, filters:', filters, 'filters.length', filters.length, 'filters.entries():', filters.entries(), 'filters.keys():', filters.keys());\r\n          // for (let [index, filter] of filters.entries()) {\r\n          for (let index=0; index < filters.length; index++) {\r\n            const key = 'filter-' + index;\r\n            // const key = `filter-${index}`;\r\n            const data = filterSelections[key];\r\n            // console.log('index:', index, 'key:', key, 'data:', data, 'filters:', filters[index]);\r\n            const {type, getValue} = filters[index];\r\n            const {unit, value} = data;\r\n            const direction = data.direction || 'subtract';\r\n\r\n            // console.log('type:', type);\r\n\r\n            // TODO put these in separate methods\r\n            switch(type) {\r\n              case 'data':\r\n                // console.log('DATA FILTER');\r\n                // itemsFiltered = itemsFiltered.filter(item => {\r\n                //   const itemValue = getValue(item);\r\n                //   console.log('horiz table itemValue:', itemValue);\r\n                //   return itemValue;\r\n                // });\r\n                break;\r\n              case 'time':\r\n                console.log('TIME FILTER direction', direction, 'value:', value, 'unit:', unit);\r\n                let min, max;\r\n\r\n                if (direction === 'subtract') {\r\n                  max = moment();\r\n                  min = moment().subtract(value, unit);\r\n                  // console.log('max:', max, 'min', min);\r\n                } else if (direction === 'add') {\r\n                  min = moment();\r\n                  max = min.add(value, unit);\r\n                } else {\r\n                  throw `Invalid time direction: ${direction}`;\r\n                }\r\n\r\n                // console.log('in case time, itemsFiltered:', itemsFiltered);\r\n                itemsFiltered = itemsFiltered.filter(item => {\r\n                  const itemValue = getValue(item);\r\n                  const itemMoment = moment(itemValue);\r\n                  const isBetween = itemMoment.isBetween(min, max)\r\n                  // console.log('itemValue:', itemValue, 'itemMoment:', itemMoment, 'min:', min, 'max:', max, 'isBetween:', isBetween);\r\n                  return isBetween;\r\n                });\r\n                // console.log('ITEMS FILTERED BY TIME FILTER', itemsFiltered);\r\n                break;\r\n\r\n              default:\r\n                throw `Unhandled filter type: ${type}`;\r\n                break;\r\n            }\r\n          }\r\n        }\r\n        return itemsFiltered;\r\n      },\r\n      // sortItems(items, sortOpts) {\r\n      sortItems(items, sortOpts) {\r\n        // console.log('sortItems, sortOpts:', sortOpts);\r\n        // TODO finish this\r\n        // if (Object.keys(this.filterData).length) {\r\n        //   console.log('there is filterData', this.filterData);\r\n        //   return this.itemsFiltered;\r\n        // } else {\r\n        //   console.log('there is no filterData');\r\n        //   return this.items;\r\n        // }\r\n\r\n        // const items = this.itemsFiltered;\r\n        // const sortOpts = this.options.sort;\r\n        // console.log(sortOpts)\r\n\r\n        // if there's no no sort config, just return the items.\r\n        if (!sortOpts) {\r\n          // console.log('noSortOpts');\r\n          return items;\r\n        }\r\n\r\n        // const getValueFn = sortOpts.getValue;\r\n        // const order = sortOpts.order;\r\n\r\n        // get sort fn or use this basic one\r\n        const sortFn = sortOpts.compare || this.defaultSortFn;\r\n        // console.log('sortFn', sortFn);\r\n        // console.log('sortFn', sortFn)\r\n        return items.sort(sortFn);\r\n      },\r\n      defaultSortFn(a, b) {\r\n        // console.log('defaultSortFn is running, a:', a, 'b:', b);\r\n        const sortOpts = this.options.sort;\r\n        const getValueFn = sortOpts.getValue;\r\n        const sortField = this.sortField;\r\n        let order;\r\n        if (typeof sortOpts.order === 'function') {\r\n          const orderFn = sortOpts.order;\r\n          order = orderFn(sortField);\r\n        } else {\r\n          order = sortOpts.order;\r\n        }\r\n        console.log('sortField', sortField, 'order', order);\r\n\r\n        const valA = getValueFn(a, sortField);\r\n        const valB = getValueFn(b, sortField);\r\n        let result;\r\n\r\n        if (valA === null) {\r\n          if (order === 'desc') {\r\n            result = -1\r\n          } else {\r\n            result = 1\r\n          }\r\n        } else if (valB === null) {\r\n          if (order === 'desc') {\r\n            result = 1\r\n          } else {\r\n            result = -1\r\n          }\r\n        } else if (valA < valB) {\r\n          result = -1;\r\n        } else if (valB < valA) {\r\n          result = 1;\r\n        } else {\r\n          result = 0;\r\n        }\r\n\r\n        // reverse if we have an order and the target order is desc\r\n        if (order) {\r\n          if (order === 'desc') {\r\n            result = result * -1;\r\n          } else if (order !== 'asc') {\r\n            throw `Unknown sort order: ${order}`;\r\n          }\r\n        }\r\n\r\n        // console.log('compare', valA, 'to', valB, ', result:', result);\r\n\r\n        return result;\r\n      },\r\n      // this updates the global state that stores filtered table rows\r\n      updateTableFilteredData() {\r\n        // console.log('update table filtered data is running, options:', this.options);\r\n\r\n        // get table id\r\n        const { tableId } = this.options;\r\n\r\n        // update global state\r\n        this.$store.commit('setHorizontalTableFilteredData', {\r\n          tableId,\r\n          data: this.itemsAfterFilters\r\n        });\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .inline-block {\r\n    display: inline-block;\r\n  }\r\n\r\n  .vertically-centered {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n  }\r\n\r\n  .pvc-horizontal-table {\r\n    margin-bottom: 10px !important;\r\n  }\r\n\r\n  .pvc-horizontal-table-controls {\r\n    text-align: center;\r\n    vertical-align: middle;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  /* dropdown filters */\r\n  .pvc-select-text {\r\n    font-size: 16px;\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n  }\r\n\r\n  .pvc-select {\r\n    width: auto;\r\n    height: 40px;\r\n    vertical-align: middle;\r\n    /*padding-right: 20px;*/\r\n  }\r\n\r\n  .pvc-select-option {\r\n    display: inline-block;\r\n    padding-right: 100px;\r\n    margin-right: 100px;\r\n  }\r\n\r\n  /* input filters using text */\r\n  .pvc-search-control-input {\r\n    height: 40px !important;\r\n    line-height: 48px;\r\n    padding: 8px;\r\n    font-size: 16px;\r\n    width: 300px;\r\n    /*margin-left: 10px;*/\r\n  }\r\n\r\n  /*REVIEW this repeats a lot of .pvc-search-control-input. can it be refactored?*/\r\n  .pvc-search-control-input-full {\r\n    height: 40px !important;\r\n    line-height: 48px;\r\n    padding: 8px;\r\n    font-size: 16px;\r\n    width: 260px;\r\n  }\r\n\r\n  .pvc-search-control-button {\r\n    width: 40px;\r\n    background: #ccc;\r\n    line-height: 40px;\r\n    float: right;\r\n  }\r\n\r\n  .pvc-download-data-button {\r\n    float: right;\r\n    vertical-align: baseline;\r\n    display: inline-block;\r\n  }\r\n\r\n  .group:after {\r\n    content: \"\";\r\n    display: table;\r\n    clear: both;\r\n  }\r\n\r\n  .pvc-horizontal-table-body {\r\n    padding-top: 1rem;\r\n    padding-bottom: 0.35rem;\r\n  }\r\n\r\n  .no-padding {\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n  }\r\n\r\n  .center-button {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .loading {\r\n    float: right;\r\n  }\r\n\r\n  .filter-by-text-form {\r\n    border: 2px solid #0f4d90;\r\n  }\r\n\r\n  table {\r\n    /* table-layout: fixed; */\r\n    margin: 0;\r\n  }\r\n\r\n  .external-link {\r\n    padding-top: 5px;\r\n  }\r\n</style>\r\n","<template>\r\n  <img :src=\"slots.source\" />\r\n</template>\r\n\r\n<script>\r\nimport TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent]\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  img {\r\n    display: block;\r\n    margin: 0 auto;\r\n  }\r\n</style>\r\n","<template>\r\n  <div v-if=\"shouldShowTable\" class=\"table-container\">\r\n    <h4 v-if=\"slots.title\"\r\n        class=\"table-title\"\r\n    >\r\n      {{ evaluateSlot(slots.title) }}\r\n    </h4>\r\n    <table>\r\n      <tbody>\r\n        <tr v-for=\"field in slots.fields\">\r\n          <th v-html=\"evaluateSlot(field.label)\" />\r\n          <td v-html=\"evaluateSlot(field.value, field.transforms, nullValue)\" />\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <div class=\"external-link\">\r\n      <a v-if=\"options && options.externalLink\"\r\n         :href=\"externalLinkHref\"\r\n         class=\"external external-link\"\r\n         target=\"_blank\"\r\n      >\r\n        {{ externalLinkText }}\r\n      </a>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    computed: {\r\n      shouldShowTable() {\r\n        if (this.item) {\r\n          if (this.item.activeTable) {\r\n            const filterValue = this.item.activeTable;\r\n            const id = this.options.id;\r\n            if (filterValue === id) {\r\n              return true\r\n            } else {\r\n              return false;\r\n            }\r\n          } else {\r\n            return true;\r\n          }\r\n        } else {\r\n          return true;\r\n        }\r\n      },\r\n      externalLinkAction() {\r\n        return this.options.externalLink.action || 'See more';\r\n      },\r\n      externalLinkText() {\r\n        const externalLinkConf = this.options.externalLink;\r\n        const actionFn = externalLinkConf.action;\r\n        const actionText = actionFn(this.externalLinkCount);\r\n        const name = externalLinkConf.name;\r\n\r\n        return `${actionText} at ${name}`;\r\n      },\r\n      externalLinkHref() {\r\n        return this.evaluateSlot(this.options.externalLink.href);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  table {\r\n    margin: 0;\r\n  }\r\n\r\n  th, td {\r\n    font-size: 15px;\r\n    text-align: left;\r\n  }\r\n\r\n  th {\r\n    width: 30%;\r\n  }\r\n\r\n  .external-link {\r\n    padding-top: 5px;\r\n  }\r\n\r\n  .table-title {\r\n    /*too much*/\r\n    /*margin-top: 1rem;*/\r\n  }\r\n\r\n  .table-container {\r\n    /*this was too much padding for the parcel table, taking out for now*/\r\n    /*padding-top: 1rem;*/\r\n    margin-bottom: 10px !important;\r\n  }\r\n</style>\r\n","<template>\r\n  <div v-if=\"items.length\">\r\n    <div class=\"container\">\r\n      <h4 v-if=\"slots.title\">\r\n        {{ evaluateSlot(slots.title) }}\r\n      </h4>\r\n      <a class=\"button overlay-toggle\" href=\"#\" v-for=\"item in items\" :data-key=\"keyForItem(item)\"\r\n                @click=\"handleClick\"\r\n                @mouseover=\"handleMouseover(keyForItem(item))\"\r\n                @mouseout=\"handleMouseout\"\r\n                :class=\"{'active': isActive(item), 'mouseover': isMousedover(item)}\">\r\n        {{ keyForItem(item) }}\r\n      </a>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    data() {\r\n      return {\r\n        mouseover: null\r\n      }\r\n    },\r\n    computed: {\r\n      items() {\r\n        return this.evaluateSlot(this.slots.items);\r\n      },\r\n    },\r\n    methods: {\r\n      isActive(item) {\r\n        const imageOverlay = this.$store.state.map.imageOverlay;\r\n        const itemKey = this.keyForItem(item);\r\n        return imageOverlay === itemKey;\r\n      },\r\n      keyForItem(item) {\r\n        const getKeyFn = this.options.getKey;\r\n        return getKeyFn(item);\r\n      },\r\n      handleClick(e) {\r\n        e.preventDefault();\r\n        const prevImageOverlay = this.$store.state.map.imageOverlay;\r\n        const nextImageOverlay = e.target.getAttribute('data-key');\r\n        // console.log(nextImageOverlay);\r\n        if (prevImageOverlay === nextImageOverlay) {\r\n          this.$store.commit('setImageOverlay', null);\r\n        } else {\r\n          this.$store.commit('setImageOverlay', nextImageOverlay);\r\n        }\r\n      },\r\n      handleMouseover(key) {\r\n        this.mouseover = key;\r\n      },\r\n      handleMouseout() {\r\n        this.mouseover = null;\r\n      },\r\n      isMousedover(item) {\r\n        const itemKey = this.keyForItem(item);\r\n        if (itemKey === this.mouseover) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .container {\r\n    margin-bottom: 30px;\r\n  }\r\n\r\n  .button {\r\n    margin-right: 10px;\r\n    margin-top: 0px;\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  .overlay-toggle {\r\n    border: 1px solid #f99300 !important;\r\n    color: #f99300 !important;\r\n    background: #fff !important;\r\n  }\r\n\r\n  .overlay-toggle.mouseover {\r\n    background: #444 !important;\r\n    color: white !important;\r\n  }\r\n\r\n  .overlay-toggle.active {\r\n    background: #f99300 !important;\r\n    color: #fff !important;\r\n  }\r\n</style>\r\n","<template>\r\n\r\n  <p v-html=\"this.message\"\r\n     :style=\"this.style\"\r\n  />\r\n\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    computed: {\r\n      additionalTags() {\r\n        return this.$props.slots.additionalTags || [];\r\n      },\r\n      message() {\r\n        // if there is a transform, it needs this textWithTags section\r\n        let textWithTags = ''\r\n        for (let tag of this.additionalTags) {\r\n          textWithTags = textWithTags + '<' + tag + '>';\r\n        }\r\n        textWithTags = textWithTags + this.evaluateSlot(this.$props.slots.text, this.$props.slots.transforms);\r\n        for (let tag of this.additionalTags) {\r\n          textWithTags = textWithTags + '</' + tag + '>';\r\n        }\r\n        return textWithTags;\r\n      },\r\n      style() {\r\n        if (this.$props.options) {\r\n          return this.$props.options.style || '';\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<template>\r\n\r\n  <span :style=\"this.style\"\r\n        v-html=\"this.message\"\r\n  />\r\n    <!-- test\r\n  </span> -->\r\n\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    computed: {\r\n      additionalTags() {\r\n        return this.$props.slots.additionalTags || [];\r\n      },\r\n      message() {\r\n        // if there is a transform, it needs this textWithTags section\r\n        let textWithTags = ''\r\n        for (let tag of this.additionalTags) {\r\n          textWithTags = textWithTags + '<' + tag + '>';\r\n        }\r\n        textWithTags = textWithTags + this.evaluateSlot(this.$props.slots.text, this.$props.slots.transforms);\r\n        for (let tag of this.additionalTags) {\r\n          textWithTags = textWithTags + '</' + tag + '>';\r\n        }\r\n        return textWithTags;\r\n      },\r\n      style() {\r\n        if (this.$props.options) {\r\n          return this.$props.options.style || '';\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<template>\r\n  <div class=\"list\">\r\n    <ul v-if=\"evaluateSlot(slots.relatedAddresses)\">\r\n      <li v-for=\"relatedAddress in evaluateSlot(slots.relatedAddresses)\"\r\n      >\r\n        <a :href=\"'#/' + encodeURIComponent(relatedAddress.properties.street_address)\"\r\n        >\r\n          {{ relatedAddress.properties.street_address }}\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    <p v-else\r\n       class=\"message-p\"\r\n    >\r\n      No related addresses were found for this address.\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.list {\r\n  position: inherit;\r\n  margin-bottom: 0px !important;\r\n}\r\n\r\nul {\r\n  list-style: none;\r\n  padding-left: 0;\r\n  margin-left: 0;\r\n}\r\n\r\n.message-p {\r\n  margin-bottom: 0px;\r\n}\r\n\r\n/*.topic-body {\r\n  margin-bottom: 0px;\r\n}*/\r\n\r\n</style>\r\n","<template>\r\n  <div>\r\n    <ul class=\"tabs\" data-tabs>\r\n      <li class=\"tabs-title\"\r\n          v-for=\"item in items\"\r\n          v-bind:class=\"{'is-active': itemIsActive(item)}\"\r\n          :key=\"keyForItem(item)\"\r\n      >\r\n        <a :href=\"'#parcel-' + keyForItem(item)\"\r\n           @click.prevent=\"clickedItem(item)\"\r\n        >\r\n        <!-- @click.prevent=\"activeItem = keyForItem(item)\" -->\r\n          {{ titleForItem(item) }}\r\n        </a>\r\n      </li>\r\n    </ul>\r\n\r\n    <div class=\"tabs-content\">\r\n      <div class=\"tabs-panel\"\r\n           v-for=\"item in items\"\r\n           v-bind:class=\"{'is-active': itemIsActive(item)}\"\r\n           v-bind:id=\"'parcel-' + keyForItem(item)\"\r\n      >\r\n        <topic-component-group :topic-components=\"comps\" :item=\"item\">\r\n        </topic-component-group>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n  import TopicComponentGroup from './TopicComponentGroup.vue';\r\n  // console.log('in TabGroup.vue script, TopicComponentGroup:', TopicComponentGroup);\r\n\r\n  export default {\r\n    name: 'TabGroup',\r\n    mixins: [TopicComponent],\r\n    components: {\r\n      // TopicComponentGroup\r\n    },\r\n    beforeCreate() {\r\n      // console.log('tabGroup beforeCreate is running');\r\n      this.$options.components.TopicComponentGroup = TopicComponentGroup;\r\n    },\r\n    // some internal state for things local enough that they shouldn't be in\r\n    // vuex if we can avoid it.\r\n    data() {\r\n      // computed props aren't accessible here, so evaluate slot separately\r\n      const items = this.evaluateSlot(this.slots.items);\r\n      return {\r\n        activeItem: this.activeItemFromState,// || this.keyForItem(items[0]),\r\n        activeMapreg: this.activeMapregFromState,// || this.titleForItem(items[0]),\r\n        activeAddress: this.activeAddressFromState,// || this.addressForItem(items[0])\r\n      };\r\n    },\r\n    mounted() {\r\n    //   // REVIEW globals. also is this still needed?\r\n    //   // $(document).foundation();\r\n      this.$data.activeItem = this.activeItemFromState;\r\n      this.$data.activeMapreg = this.activeMapregFromState;\r\n      this.$data.activeAddress = this.activeAddressFromState;\r\n    },\r\n    // props: [],\r\n    computed: {\r\n      items() {\r\n        const items = this.evaluateSlot(this.slots.items);\r\n\r\n        // sort\r\n        const sortFn = this.options.sort;\r\n        let itemsSorted = items;\r\n        if (sortFn) {\r\n          itemsSorted = sortFn(items);\r\n        }\r\n\r\n        return itemsSorted;\r\n      },\r\n      comps() {\r\n        return this.options.components;\r\n      },\r\n      activeItemFromState() {\r\n        return this.$store.state.parcels.dor.activeParcel;\r\n      },\r\n      activeMapregFromState() {\r\n        return this.$store.state.parcels.dor.activeMapreg;\r\n      },\r\n      activeAddressFromState() {\r\n        return this.$store.state.parcels.dor.activeAddress;\r\n      }\r\n    },\r\n    watch: {\r\n      // when items change, update the activeItem\r\n      items(items) {\r\n        const nextFirstItem = items[0];\r\n        const nextActiveKey = this.keyForItem(nextFirstItem);\r\n        this.activeItem = nextActiveKey;\r\n        const nextMapreg = this.titleForItem(nextFirstItem);\r\n        this.activeMapreg = nextMapreg;\r\n        const nextAddress = this.addressForItem(nextFirstItem);\r\n        this.activeAddress = nextAddress;\r\n      }\r\n    },\r\n    methods: {\r\n      clickedItem(item) {\r\n        this.$data.activeItem = this.keyForItem(item)\r\n        this.$data.activeMapreg = this.titleForItem(item);\r\n        this.$data.activeAddress = this.addressForItem(item);\r\n\r\n        const payload = {\r\n          parcelLayer: 'dor',\r\n          activeParcel: this.$data.activeItem,\r\n          activeMapreg: this.$data.activeMapreg,\r\n          activeAddress: this.$data.activeAddress\r\n        }\r\n        this.$store.commit('setActiveParcel', payload);\r\n        // this.$store.commit('setActiveDorParcel', this.$data.activeItem);\r\n      },\r\n      keyForItem(item) {\r\n        try {\r\n          return this.options.getKey(item);\r\n        } catch (e) {\r\n          return null;\r\n        }\r\n      },\r\n      titleForItem(item) {\r\n        try {\r\n          return this.options.getTitle(item);\r\n        } catch (e) {\r\n          return null;\r\n        }\r\n      },\r\n      addressForItem(item) {\r\n        try {\r\n          return this.options.getAddress(item);\r\n        } catch (e) {\r\n          return null;\r\n        }\r\n      },\r\n      itemIsActive(item) {\r\n        const isActive = (this.activeItem === this.keyForItem(item));\r\n        return isActive;\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .tabs-panel {\r\n    padding: 20px;\r\n    padding-bottom: 0px;\r\n  }\r\n\r\n  /*recreate phila patterns tab styles*/\r\n  .tabs-title a {\r\n    border-left: 5px solid #fff;\r\n  }\r\n\r\n  .tabs-title.is-active a {\r\n    border-left: 5px solid #f99300;\r\n    /*when you first load the page, the active tab doesn't turn gray for some\r\n    reason. forcing it here.*/\r\n    background: #f0f0f0;\r\n  }\r\n\r\n  .tabs-title a:hover {\r\n    border-left: 5px solid #f99300;\r\n    background: #f0f0f0;\r\n  }\r\n</style>\r\n","<template>\r\n  <div>\r\n    <div v-if=\"!!this.$props.options.filters\"\r\n         class=\"mb-horizontal-table-controls\"\r\n    >\r\n      <div v-for=\"(filter, index) in this.$props.options.filters\"\r\n            :id=\"'filter-' + index\"\r\n            class=\"inline-block\"\r\n      >\r\n        <div class='vertically-centered mb-select-text'>{{ filter.label }}</div>\r\n        <select @change=\"handleFilterValueChange\"\r\n                class=\"mb-select\"\r\n        >\r\n          <optgroup>\r\n            <option v-for=\"filterValue in filter.values\"\r\n                    :value=\"slugifyFilterValue(filterValue)\"\r\n                    class=\"mb-select-option\"\r\n            >\r\n              {{ filterValue.label }}\r\n            </option>\r\n          </optgroup>\r\n        </select>\r\n      </div>\r\n    </div>\r\n    <horizontal-table v-for=\"table in options.tables\"\r\n                      v-show=\"shouldShowTable(table.options.id)\"\r\n                      :item=\"tableGroupData\"\r\n                      :options=\"table.options\"\r\n                      :slots=\"table.slots\"\r\n    >\r\n    </horizontal-table>\r\n    <!-- <topic-component-group :topic-components=\"options.components\" :item=\"item\" /> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n  import HorizontalTable from './HorizontalTable.vue';\r\n  // import TopicComponentGroup from '../TopicComponentGroup.vue';\r\n\r\n  export default {\r\n    // name: 'HorizontalTableGroup',\r\n    mixins: [TopicComponent],\r\n    components: {\r\n      HorizontalTable,\r\n      // TopicComponentGroup\r\n    },\r\n    // some internal state for things local enough that they shouldn't be in\r\n    // vuex if we can avoid it.\r\n    data() {\r\n      const tableGroupData = {\r\n        'tableGroupId': this.options.horizontalTableGroupId,\r\n        'activeTable': null,\r\n        'activeTableId': null,\r\n      };\r\n      // return {\r\n      //   horizontalTableGroupId: this.options.horizontalTableGroupId,\r\n      //   activeTable: null,\r\n      //   activeTableId: null,\r\n      // };\r\n      return {\r\n        tableGroupData\r\n      };\r\n    },\r\n    created() {\r\n      console.log('horizontalTableGroup created is starting, this.tableGroupData:', this.tableGroupData);\r\n      if (this.options.filters) {\r\n        console.log('horizontalTableGroup created, if this.options.filters is running:', this.options.filters, this.options.filters.entries());\r\n        for (let filter of this.options.filters) {\r\n        // for (let [index, filter] of this.options.filters.entries()) {\r\n          console.log('for loop, this.options.filters:', this.options.filters[0]);\r\n          // let filter = this.options.filters[0]\r\n        // for (let [index, filter] of this.options.filters.entries()) {\r\n          console.log('for loop, filter:', filter);\r\n          // console.log('for loop, index:', index, 'filter:', filter);\r\n          const defaultTableName = filter.values[0].value || {};\r\n          console.log('for loop, defaultTableName:', defaultTableName);\r\n\r\n          // add activeTable to local data\r\n          this.tableGroupData.activeTable = defaultTableName;\r\n          // add activeTableId to local data\r\n          // console.log('for loop, this.options.components:', this.options.components);\r\n          for (let comp of this.options.tables) {\r\n            if (comp.options.id === defaultTableName) {\r\n              this.tableGroupData.activeTableId = comp._id;\r\n            }\r\n          }\r\n          console.log('horizontalTableGroup this.tableGroupData:', this.tableGroupData);\r\n          this.$store.commit('setHorizontalTableGroupActiveTable', this.tableGroupData);\r\n          // this.$store.commit('setHorizontalTableGroupActiveTableId', this.activeTable);\r\n        }\r\n        console.log('horizontalTableGroup created, if this.options.filters is ending');\r\n      }\r\n      if (this.options.alternate) {\r\n        console.log('horizontalTableGroup created, if this.options.alternate - mainTable', this.options.alternate.mainTable, this.altMainTable, 'dependentTable', this.options.alternate.dependentTable, this.altDepTable);\r\n        const sources = this.$store.state.sources;\r\n        // console.log('Tablegroup source check dep', sources[this.altDepTable.dataSource].data);\r\n        // console.log('Tablegroup source check main', sources[this.altMainTable.dataSource].data);\r\n        if (sources[this.altDepTable.dataSource].data && !sources[this.altMainTable.dataSource].data) {\r\n          // console.log('Tablegroup there is a dep table, and not a main table');\r\n          this.activeTable = this.altDepTable.id;\r\n          this.activeTableId = 'aaa'\r\n          this.$store.commit('setHorizontalTableGroupActiveTable', this.tableGroupData);\r\n          // this.$store.commit('setHorizontalTableGroupActiveTableId', this.activeTable);\r\n        } else if (sources[this.altMainTable.dataSource].data) {\r\n          this.activeTable = this.altMainTable.id;\r\n          this.activeTableId = 'bbb'\r\n          this.$store.commit('setHorizontalTableGroupActiveTable', this.tableGroupData);\r\n          // this.$store.commit('setHorizontalTableGroupActiveTableId', this.activeTable);\r\n        }\r\n      }\r\n      if (this.options.showBoth) {\r\n        console.log('tableGroup showBoth');\r\n      }\r\n    },\r\n    computed: {\r\n      altMainTable() {\r\n        if (this.options.alternate) {\r\n          return this.options.alternate.mainTable;\r\n        } else {\r\n          return null\r\n        }\r\n      },\r\n      altDepTable() {\r\n        if (this.options.alternate) {\r\n          return this.options.alternate.dependentTable;\r\n        } else {\r\n          return null\r\n        }\r\n      },\r\n    },\r\n    methods: {\r\n      shouldShowTable(id) {\r\n        let result = true;\r\n\r\n        // if the table is in a tab group or table group, it will have an \"item\" in props\r\n        // if (this.item) {\r\n          // if it is in a table group, the item will contain an \"activeTable\" for the group\r\n          // if (this.activeTable) {\r\n            // const id = this.options.id;\r\n            if (this.tableGroupData.activeTable != id) {\r\n              result = false\r\n            }\r\n          // }\r\n        // }\r\n        // if there is no data, and the table should not show at all if it is empty\r\n        // if (this.options.showOnlyIfData && this.tableGroupData.length === 0) {\r\n        //   result = false;\r\n        // }\r\n\r\n        return result;\r\n      },\r\n      slugifyFilterValue(filterValue) {\r\n        const { direction, value, unit } = filterValue;\r\n        return [direction, value, unit].join('-');\r\n      },\r\n      deslugifyFilterValue(slug) {\r\n        const parts = slug.split('-');\r\n        const [direction, value, unit] = parts;\r\n        return {value, unit, direction};\r\n      },\r\n      handleFilterValueChange(e) {\r\n        console.log('handle activeTable value change', e);\r\n        const target = e.target;\r\n        const slug = target.value;\r\n        // deslugify filter value\r\n        const valueObj = this.deslugifyFilterValue(slug);\r\n        const tableName = valueObj.value;\r\n\r\n        // add activeTable to local data\r\n        this.tableGroupData.activeTable = tableName;\r\n\r\n        // add activeTableId to local data\r\n        for (let comp of this.options.tables) {\r\n          console.log('tableName:', tableName, 'comp.options.id:', comp.options.id, 'comp:', comp);\r\n          if (comp.options.id === tableName) {\r\n            this.tableGroupData.activeTableId = comp._id;\r\n          }\r\n        }\r\n\r\n        console.log('handleFilterValueChange, this.tableGroupData:', this.tableGroupData);\r\n        this.$store.commit('setHorizontalTableGroupActiveTable', this.tableGroupData);\r\n        // this.$store.commit('setHorizontalTableGroupActiveTableId', this.activeTable);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .tabs-panel {\r\n    padding: 20px;\r\n  }\r\n\r\n  .inline-block {\r\n    display: inline-block;\r\n  }\r\n\r\n  .vertically-centered {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n  }\r\n\r\n  .mb-horizontal-table-controls {\r\n    text-align: center;\r\n    vertical-align: middle;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  /* dropdown filters */\r\n  .mb-select-text {\r\n    font-size: 16px;\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n  }\r\n\r\n  .mb-select {\r\n    width: auto;\r\n    height: 40px;\r\n    vertical-align: middle;\r\n    /*padding-right: 20px;*/\r\n  }\r\n\r\n  .mb-select-option {\r\n    display: inline-block;\r\n    padding-right: 100px;\r\n    margin-right: 100px;\r\n  }\r\n</style>\r\n","<template>\r\n  <div v-if=\"shouldShowTopic\">\r\n  <!-- <div> -->\r\n    <a href=\"#\"\r\n       class=\"topic-header\"\r\n       @click.prevent=\"handleTopicHeaderClick\"\r\n       v-if=\"shouldShowHeader\"\r\n       :data-topic-key=\"topicKey\"\r\n    >\r\n      <span v-show=\"status === 'waiting'\" class=\"loading\">\r\n        <i class=\"fa fa-spinner fa-lg spin\"></i>\r\n      </span>\r\n      <i :class=\"['fa', 'fa-' + icon, 'topic-header-icon']\"\r\n         aria-hidden=\"true\"\r\n      />\r\n      {{ topic.label }}\r\n    </a>\r\n\r\n    <!-- success -->\r\n    <transition name=\"topic-body\">\r\n      <div class=\"topic-body\"\r\n           v-if=\"shouldShowBody\"\r\n           :data-topic-key=\"topicKey\"\r\n      >\r\n        <topic-component-group :topic-components=\"topic.components\" />\r\n      </div>\r\n    </transition>\r\n\r\n    <!-- error -->\r\n    <div class=\"topic-body\"\r\n         v-show=\"shouldShowError\"\r\n         v-html=\"this.errorMessage\"\r\n    >\r\n    <!-- Could not locate records for that address. -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponentGroup from './TopicComponentGroup.vue';\r\n\r\n  export default {\r\n    name: 'Topic',\r\n    props: ['topicKey'],\r\n    components: {},\r\n    beforeCreate() {\r\n      this.$options.components.TopicComponentGroup = TopicComponentGroup;\r\n    },\r\n    computed: {\r\n      // returns the full config object for the topic\r\n      topic() {\r\n        const topicKey = this.$props.topicKey;\r\n        const topicsFiltered = this.$config.topics.filter((topic) => {\r\n          return topic.key === this.$props.topicKey;\r\n        });\r\n        if (topicsFiltered.length !== 1) {\r\n          throw `Could not get single config object for topic '${topicKey}'.`;\r\n        }\r\n        const config = topicsFiltered[0];\r\n        return config;\r\n      },\r\n      icon() {\r\n        return this.topic.icon;\r\n      },\r\n      isActive() {\r\n        const key = this.topic.key;\r\n        const activeTopic = this.$store.state.activeTopic;\r\n        return activeTopic === key;\r\n      },\r\n      shouldShowHeader() {\r\n        return this.$config.topics.length > 1;\r\n      },\r\n      dataSources() {\r\n        return this.topic.dataSources || [];\r\n      },\r\n      hasData() {\r\n        // console.log(this.topicKey, '-', 'hasData?', this.dataSources);\r\n\r\n        // make sure the following is true for all data sources\r\n        const hasData = this.dataSources.every(dataSource => {\r\n          const targetsFn = this.$config.dataSources[dataSource].targets;\r\n\r\n          // if the data source is configured for targets\r\n          if (targetsFn) {\r\n            const targetsMap = this.$store.state.sources[dataSource].targets;\r\n            const targets = Object.values(targetsMap);\r\n\r\n            // but there are no targets for this address, return false\r\n            if (targets.length === 0) {\r\n              return false;\r\n            }\r\n\r\n            // if there are targets for this address, make sure none of them\r\n            // are \"waiting\"\r\n            return targets.every(target => target.status !== 'waiting');\r\n\r\n          // if the data source is not configured for targets, just check that\r\n          // it has data\r\n          } else {\r\n            return !!this.$store.state.sources[dataSource].data;\r\n          }\r\n        });\r\n\r\n        return hasData;\r\n      },\r\n      shouldShowBody() {\r\n        const succeeded = this.status === 'success';\r\n        const hasData = this.hasData;\r\n        const should = succeeded && hasData && this.isActive;\r\n        return should;\r\n      },\r\n      shouldShowTopic() {\r\n        if (!this.topic.onlyShowTopicIfDataExists) {\r\n          return true;\r\n        } else {\r\n          let result = true;\r\n          const requiredDataSources = Object.keys(this.topic.onlyShowTopicIfDataExists);\r\n          // console.log('requiredDataSources', requiredDataSources);\r\n          for (let requiredDataSource of requiredDataSources) {\r\n            const dataSource = this.topic.onlyShowTopicIfDataExists[requiredDataSource];\r\n            const pathToDataArray = dataSource.pathToDataArray;\r\n            const minDataLength = dataSource.minDataLength;\r\n            // console.log('requiredDataSource', requiredDataSource, 'dataSource', dataSource);\r\n            let dataArray;\r\n            if (!this.$store.state.sources[requiredDataSource].data) {\r\n              // if there is no data (yet)\r\n              return false;\r\n            } else {\r\n              if (!pathToDataArray) {\r\n                dataArray = this.$store.state.sources[requiredDataSource].data;\r\n              } else if (pathToDataArray.length === 1) {\r\n                dataArray = this.$store.state.sources[requiredDataSource].data[pathToDataArray[0]];\r\n              }\r\n              // TODO - implement system if the path to the data is longer than a single step\r\n              // else {\r\n                //   dataArray = this.$store.state.sources[requiredDataSource].data[pathToDataArray[0]].[pathToDataArray[1]];\r\n                // }\r\n              if (dataArray.length < minDataLength) {\r\n                result = false\r\n              }\r\n            }\r\n          }\r\n          return result;\r\n        }\r\n      },\r\n      shouldShowError() {\r\n        const shouldShowError = (\r\n          // topic must be active and\r\n          this.isActive && (\r\n            // there either has to be an error or\r\n            this.status === 'error' ||\r\n            // we got the response and it's empty\r\n            (this.status !== 'waiting' && !this.hasData)\r\n          )\r\n        );\r\n        shouldShowError && console.log('BINGO BINGO BINGO:', this.topicKey, 'shouldShowError:', shouldShowError, 'status:', this.status, 'hasData:', this.hasData);\r\n        return shouldShowError;\r\n      },\r\n      errorMessage() {\r\n        if (this.topic.errorMessage) {\r\n          return this.topic.errorMessage(this.$store.state);\r\n        } else {\r\n          return 'Could not locate records for that address.';\r\n        }\r\n      },\r\n      // REVIEW this is getting cached and not updating when the deps update\r\n      status: {\r\n        cache: false,\r\n        get() {\r\n          // get the status of each source\r\n          const dataSources = this.topic.dataSources || [];\r\n\r\n          // if no sources, return success\r\n          if (dataSources.length === 0) {\r\n            return 'success';\r\n          }\r\n\r\n          let topicStatus;\r\n          const sourceStatuses = dataSources.map(dataSource => {\r\n            const targetsFn = this.$config.dataSources[dataSource].targets;\r\n\r\n            // if the data source is configured for targets\r\n            if (targetsFn) {\r\n              const targetsMap = this.$store.state.sources[dataSource].targets;\r\n              const targets = Object.values(targetsMap);\r\n\r\n              // but there are no targets for this address, return false\r\n              if (targets.length === 0) {\r\n                return;\r\n              }\r\n\r\n              // if there are targets for this address, make sure none of them\r\n              // are \"waiting\"\r\n              return targets.map(target => {\r\n                return target.status\r\n              });\r\n\r\n            // if the data source is not configured for targets, just check that\r\n            // it has data\r\n            } else {\r\n              return [this.$store.state.sources[dataSource].status];\r\n            }\r\n          });\r\n\r\n          let flatArray = []\r\n          for (let sourceStatus of sourceStatuses) {\r\n            if (sourceStatus) {\r\n              for (let sourceStatusValue of sourceStatus) {\r\n                flatArray.push(sourceStatusValue);\r\n              }\r\n            }\r\n          }\r\n\r\n          if (flatArray.includes('waiting')) {\r\n            topicStatus = 'waiting';\r\n          } else if (flatArray.includes('error')) {\r\n            topicStatus = 'error';\r\n          } else {\r\n            topicStatus = 'success';\r\n          }\r\n          return topicStatus;\r\n        }\r\n      },\r\n    },\r\n    methods: {\r\n      configForBasemap(key) {\r\n        return this.$config.map.basemaps[key];\r\n      },\r\n\r\n      handleTopicHeaderClick(e) {\r\n        const topic = this.$props.topicKey;\r\n        let nextTopic;\r\n\r\n        if (topic !== this.$store.state.activeTopic) {\r\n          nextTopic = topic;\r\n        }\r\n\r\n        // notify controller (which will handle routing)\r\n        this.$controller.handleTopicHeaderClick(nextTopic);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  /*REVIEW these aren't prefixed `mb-`because they're scoped, but it feels\r\n  inconsistent?*/\r\n  .topic-header {\r\n    background: #f5f5f5;\r\n    border: 1px solid #ddd;\r\n    display: block;\r\n    font-size: 18px;\r\n    font-weight: normal;\r\n    height: 70px;\r\n    line-height: 45px;\r\n    padding: 10px;\r\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .topic-header:hover {\r\n    background: #fff;\r\n    color: inherit;\r\n  }\r\n\r\n  .topic-header-icon {\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n  }\r\n\r\n  .topic-body {\r\n    padding: 5px;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .loading {\r\n    float: right;\r\n  }\r\n\r\n  .topic-body-enter-active, .topic-body-leave-active {\r\n    transition: opacity 0.18s;\r\n  }\r\n\r\n  .topic-body-enter, .topic-body-leave-to {\r\n    opacity: 0;\r\n  }\r\n</style>\r\n","<template>\r\n  <div>\r\n    <topic v-for=\"topic in this.$config.topics\"\r\n           :topicKey=\"topic.key\"\r\n           :key=\"topic.key\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Topic from './Topic.vue';\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    name: 'TopicSet',\r\n    components: {\r\n      Topic,\r\n    },\r\n    mounted() {\r\n      if (this.$store.state.activeTopic === null || this.$store.state.activeTopic === '') {\r\n        this.setDefaultTopicActive();\r\n      }\r\n    },\r\n    methods: {\r\n      setDefaultTopicActive() {\r\n        if (this.$props.options.defaultTopic) {\r\n          this.$store.state.activeTopic = this.$props.options.defaultTopic;\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","<template>\r\n  <div>\r\n    <component v-for=\"(comp, compIndex) in topicComponents\"\r\n               :is=\"comp.type\"\r\n               class=\"topic-component\"\r\n               :slots=\"comp.slots\"\r\n               :options=\"comp.options\"\r\n               :item=\"item\"\r\n               :key=\"getCompKey(key, compIndex)\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import generateUniqueId from '../util/unique-id';\r\n\r\n  import AnyHeader from './AnyHeader.vue';\r\n  import Badge from './Badge.vue';\r\n  import ButtonComp from './ButtonComp.vue';\r\n  import Callout from './Callout.vue';\r\n  import CollectionSummary from './CollectionSummary.vue';\r\n  import Division from './Division.vue';\r\n  import ePayForm from './ePayForm.vue';\r\n  import HorizontalTable from './HorizontalTable.vue';\r\n  import Image_ from './Image.vue';\r\n  import VerticalTable from './VerticalTable.vue';\r\n  import OverlayToggleGroup from './OverlayToggleGroup.vue';\r\n  import Paragraph from './Paragraph.vue';\r\n  import SpanComp from './SpanComp.vue';\r\n  import List from './List.vue';\r\n  import TabGroup from './TabGroup.vue';\r\n  import HorizontalTableGroup from './HorizontalTableGroup.vue';\r\n  import BadgeCustom from './BadgeCustom.vue';\r\n  import Topic from './Topic.vue';\r\n  import TopicSet from './TopicSet.vue';\r\n  // console.log('in TopicComponentGroup.vue script, BadgeCustom:', BadgeCustom, 'Badge:', Badge, 'TabGroup:', TabGroup, 'Callout:', Callout, 'CollectionSummary:', CollectionSummary, 'HorizontalTable:', HorizontalTable);\r\n\r\n  export default {\r\n    name: 'TopicComponentGroup',\r\n    props: ['topicComponents', 'item', 'filterData'],\r\n    components: {\r\n      Badge,\r\n      ButtonComp,\r\n      Callout,\r\n      CollectionSummary,\r\n      Division,\r\n      ePayForm,\r\n      HorizontalTable,\r\n      Image_,\r\n      VerticalTable,\r\n      OverlayToggleGroup,\r\n      Paragraph,\r\n      SpanComp,\r\n      List,\r\n      HorizontalTableGroup,\r\n    },\r\n    beforeCreate() {\r\n      // console.log('TopicComponentGroup beforeCreate is running');\r\n      this.$options.components.TabGroup = TabGroup;\r\n      this.$options.components.BadgeCustom = BadgeCustom;\r\n      this.$options.components.Topic = Topic;\r\n      this.$options.components.TopicSet = TopicSet;\r\n      this.$options.components.AnyHeader = AnyHeader;\r\n    },\r\n    data() {\r\n      return {\r\n        // generate a (basically) unique id for the group. the go-to npm packages\r\n        // for uuid generation aren't available as umd builds on unpkg and\r\n        // therefore won't work with the examples. this is good enough :)\r\n        key: generateUniqueId()\r\n      };\r\n    },\r\n    methods: {\r\n      getCompKey(compGroupKey, compIndex) {\r\n        return `topic-comp-${compGroupKey}-${compIndex}`;\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .topic-component {\r\n    /* margin-bottom: 10px !important; */\r\n  }\r\n</style>\r\n","<template>\r\n  <!-- REVIEW this uses patterns -->\r\n  <div class=\"mb-badge panel center\">\r\n    <div class=\"mb-badge-header\" :style=\"style\">\r\n      {{ evaluateSlot(slots.title) }}\r\n    </div>\r\n    <topic-component-group :topic-components=\"options.components\" :item=\"item\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n  import TopicComponentGroup from './TopicComponentGroup.vue';\r\n\r\n  export default {\r\n    name: 'BadgeCustom',\r\n    mixins: [TopicComponent],\r\n    beforeCreate() {\r\n      this.$options.components.TopicComponentGroup = TopicComponentGroup;\r\n    },\r\n    computed: {\r\n      style() {\r\n        const titleBackgroundValOrFn = (this.options || {}).titleBackground;\r\n        let titleBackground;\r\n\r\n        if (titleBackgroundValOrFn) {\r\n          if (typeof titleBackgroundValOrFn === 'function') {\r\n            titleBackground = titleBackgroundValOrFn(this.$store.state);\r\n          } else {\r\n            titleBackground = titleBackgroundValOrFn;\r\n          }\r\n        } else {\r\n          titleBackground = '#444';\r\n        }\r\n\r\n        return { background: titleBackground };\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .mb-badge {\r\n    /*width: 300px;*/\r\n    padding: 0;\r\n    margin: 0 auto;\r\n    margin-bottom: inherit;\r\n  }\r\n\r\n  @media (max-width: 640px) {\r\n    .mb-badge {\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  /*REVIEW this should use foundation classes*/\r\n  @media (min-width: 640px) {\r\n    .mb-badge {\r\n      width: 325px;\r\n    }\r\n  }\r\n\r\n  .mb-badge-header {\r\n    color: #fff;\r\n    font-weight: bold;\r\n    text-align: center;\r\n    padding-top: 2px;\r\n    padding-bottom: 2px;\r\n  }\r\n\r\n  .mb-badge-body {\r\n    padding: 12px;\r\n  }\r\n\r\n  .mb-badge-body > h1 {\r\n    margin: 0;\r\n    margin-bottom: 5px;\r\n  }\r\n</style>\r\n","<template>\r\n  <div id=\"toggle-tab\"\r\n       class=\"toggle-tab\"\r\n       :style=\"{ top: buttonPosition }\"\r\n       @click=\"handleFullScreenTopicsToggleButtonClick\"\r\n       v-if=\"!this.isMobileOrTablet\"\r\n  >\r\n    <span class=\"align-span\">\r\n      <i :class='this.currentIcon'></i>\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        'divHeight': 0,\r\n        'buttonPosition': 0,\r\n      }\r\n    },\r\n    mounted() {\r\n      window.addEventListener('resize', this.setDivHeight);\r\n      this.setDivHeight();\r\n    },\r\n    computed: {\r\n      fullScreenMapEnabled() {\r\n        return this.$store.state.fullScreenMapEnabled;\r\n      },\r\n      fullScreenTopicsEnabled() {\r\n        return this.$store.state.fullScreenTopicsEnabled;\r\n      },\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n      cyclomediaActive() {\r\n        return this.$store.state.cyclomedia.active;\r\n      },\r\n      pictometryActive() {\r\n        return this.$store.state.pictometry.active;\r\n      },\r\n      picOrCycloActive() {\r\n        if (this.cyclomediaActive || this.pictometryActive) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      currentIcon() {\r\n        if (this.fullScreenTopicsEnabled) {\r\n          return 'fa fa-caret-left fa-2x'\r\n        } else {\r\n          return 'fa fa-caret-right fa-2x'\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      picOrCycloActive() {\r\n        this.$nextTick(() => {\r\n          this.setDivHeight();\r\n        })\r\n      }\r\n    },\r\n    methods: {\r\n      setDivHeight() {\r\n        let el;\r\n        if (this.fullScreenTopicsEnabled) {\r\n          el = document.getElementById('topic-panel-container');\r\n        } else {\r\n          el = document.getElementById('map-tag');\r\n        }\r\n        const mapDivStyle = window.getComputedStyle(el);\r\n        const mapDivHeight = parseFloat(mapDivStyle.getPropertyValue('height').replace('px', ''));\r\n        // console.log('FullScreenTopicsToggleTab setDivHeight is running, el:', el, 'mapDivHeight:', mapDivHeight);\r\n\r\n        this.buttonPosition = (mapDivHeight-48)/2 + 'px';\r\n      },\r\n      handleFullScreenTopicsToggleButtonClick(e) {\r\n        const prevFullScreenTopicsEnabled = this.$store.state.fullScreenTopicsEnabled;\r\n        const nextFullScreenTopicsEnabled = !prevFullScreenTopicsEnabled;\r\n        this.$store.commit('setFullScreenTopicsEnabled', nextFullScreenTopicsEnabled);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  /* .toggle-tab {\r\n    position: absolute;\r\n    left: 0px;\r\n    border-width: 1.3px;\r\n    border-color: #CAC9C9;\r\n    height: 48px;\r\n    line-height: 58px;\r\n    width:24px;\r\n    background-color: white;\r\n    display: inline-block;\r\n    z-index: 500; */\r\n    /* border-left-style: solid; */\r\n    /* box-shadow: 2px 2px 7px grey; */\r\n  /* } */\r\n\r\n  .toggle-tab {\r\n    display: none;\r\n  }\r\n\r\n  .align-span {\r\n    margin-left: 6px;\r\n  }\r\n\r\n  @media screen and (min-width: 46.875em) {\r\n    .toggle-tab {\r\n      position: absolute;\r\n      right: 0px;\r\n      border-width: 1.3px;\r\n      border-style: solid;\r\n      border-color: #CAC9C9;\r\n      height: 48px;\r\n      line-height: 56px;\r\n      width:24px;\r\n      background-color: white;\r\n      display: inline-block;\r\n      z-index: 500;\r\n      opacity: 0.7;\r\n      /* border-left-style: solid; */\r\n      /* box-shadow: 2px 2px 7px grey; */\r\n    }\r\n  }\r\n\r\n</style>\r\n","<template>\r\n  <div class=\"mb-panel-topics-greeting\">\r\n    <div class=\"columns medium-20 medium-centered\">\r\n\r\n      <address-input v-if=\"this.shouldShowAddressInput\" />\r\n      <address-candidate-list v-if=\"this.addressAutocompleteEnabled && this.shouldShowAddressInput\"/>\r\n\r\n      <div v-if=\"!components && !hasError\" class=\"greeting\" v-html=\"initialMessage\">\r\n      </div>\r\n\r\n      <div v-if=\"!components && hasError\" class=\"greeting greeting-error\" v-html=\"errorMessage\">\r\n      </div>\r\n\r\n      <component v-if=\"components\"\r\n                 v-for=\"(topicComp, topicCompIndex) in components\"\r\n                 :is=\"topicComp.type\"\r\n                 class=\"topic-comp\"\r\n                 :slots=\"topicComp.slots\"\r\n                 :key=\"'greeting'\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Image_ from './Image.vue';\r\n  import AddressInput from './AddressInput.vue';\r\n  import AddressCandidateList from './AddressCandidateList.vue';\r\n\r\n  export default {\r\n    components: {\r\n      Image_,\r\n      AddressInput,\r\n      AddressCandidateList,\r\n    },\r\n    computed: {\r\n      shouldShowAddressInput() {\r\n        if (this.$config.addressInputLocation == 'topics') {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      addressAutocompleteEnabled() {\r\n        // TODO tidy up the code\r\n        if (this.$config.addressInput) {\r\n          if (this.$config.addressInput.autocompleteEnabled === true) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      components() {\r\n        const greetingConfig = this.$config.greeting || {};\r\n        return greetingConfig.components;\r\n      },\r\n      hasError() {\r\n        return this.$store.state.geocode.status === 'error';\r\n      },\r\n      initialMessage() {\r\n        const greetingConfig = this.$config.greeting || {};\r\n        return greetingConfig.initialMessage;\r\n      },\r\n      errorMessage() {\r\n        const input = this.$store.state.geocode.input;\r\n        return `\r\n          <p>\r\n            We couldn't find\r\n            ${input ? '<strong>' + input + '</strong>' : 'that address'}.\r\n            Are you sure everything was spelled correctly?\r\n          </p>\r\n          <p>\r\n            Here are some examples of things you can search for:\r\n          </p>\r\n          <ul>\r\n            <li>1234 Market St</li>\r\n            <li>1001 Pine Street #201</li>\r\n            <li>12th & Market</li>\r\n          </ul>\r\n        `;\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .mb-panel-topics-greeting {\r\n    padding-top: 20px;\r\n  }\r\n\r\n  .greeting {\r\n    font-size: 20px;\r\n    color: #444;\r\n    padding: 14px;\r\n  }\r\n\r\n  .greeting-error {\r\n    border-left-color: #ff0000;\r\n  }\r\n\r\n  /*medium*/\r\n  @media screen and (min-width: 750px) {\r\n    .mb-panel-topics-greeting {\r\n      /*make this scroll on medium screens*/\r\n      /*REVIEW this is a little hacky. the 120px shouldn't be hard-coded.*/\r\n      height: calc(100vh - 120px);\r\n      overflow: auto;\r\n    }\r\n  }\r\n</style>\r\n","<template>\r\n  <div>\r\n    <div class=\"legend\"\r\n         v-html=\"this.legendHtml\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n  import L from 'leaflet';\r\n\r\n  export default {\r\n    props: ['layer',\r\n            'layerName',\r\n            'layerId',\r\n            // minScale, maxScale, and drawingInfo are stored in layerDefinition\r\n            'layerDefinition',\r\n            'legend',\r\n            'scales'\r\n    ],\r\n    data() {\r\n      return {\r\n        legendHtml: '',\r\n        options: {\r\n          listTemplate: '<ul>{layers}</ul>',\r\n          layerTemplate: '<li><ul>{legends}</ul></li>',\r\n          // layerTemplate: '<li><strong>{layerName}</strong><ul>{legends}</ul></li>',\r\n          listRowTemplate: '<li><img width=\"{width}\" height=\"{height}\" src=\"data:{contentType};base64,{imageData}\"><span>{label}</span></li>',\r\n          emptyLabel: '',\r\n          // emptyLabel: '<all values>',\r\n          container: null\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      this.initialize();\r\n    },\r\n    watch: {\r\n      scale(nextScale) {\r\n        this.createLegend(nextScale);\r\n      },\r\n      legend() {\r\n        console.log('watch legend fired');\r\n        this.createLegend(this.scale);\r\n      }\r\n    },\r\n    computed: {\r\n      scale() {\r\n        const zoom = this.$store.state.map.zoom;\r\n        const zoomPlus = zoom + 1;\r\n        const scale = this.$props.scales[zoomPlus];\r\n        return scale;\r\n      },\r\n    },\r\n    methods: {\r\n      initialize() {\r\n        let drawingInfo;\r\n        if (this.$props.layerDefinition) {\r\n          drawingInfo = this.$props.layerDefinition.drawingInfo;\r\n        }\r\n        const opts = {\r\n          layerName: this.$props.layerName,\r\n          layerId: this.$props.layerId,\r\n          store: this.$store,\r\n          drawingInfo\r\n        }\r\n        console.log('LegendBox initialize is running:', this.$props.layer, opts);\r\n        const legend = L.esri.legendControl(this.$props.layer, opts);\r\n      },\r\n      createLegend(scale) {\r\n        const legend = this.$props.legend;\r\n        console.log('METHOD createLegend running', scale, legend);\r\n        let layersHtml = '';\r\n        if (legend.layers.length === 1) {\r\n          const layer = legend.layers[0];\r\n          let legendsHtml = '';\r\n          for (let layerLegend of layer.legend) {\r\n            const layerLegendJSON = JSON.parse(JSON.stringify(layerLegend));\r\n            // console.log('layerLegendJSON', layerLegendJSON);\r\n            if (!layerLegendJSON.label) {\r\n              layerLegendJSON.label = '';\r\n            }\r\n            legendsHtml += L.Util.template(this.options.listRowTemplate, layerLegendJSON);\r\n          }\r\n          layersHtml += L.Util.template(this.options.layerTemplate, {\r\n            layerName: layer.layerName,\r\n            legends: legendsHtml\r\n          });\r\n        } else {\r\n          for (let layer of legend.layers) {\r\n            // console.log('max:', layer.maxScale, 'scale:', scale, 'min:', layer.minScale);\r\n            let legendsHtml = '';\r\n            if (parseFloat(scale) > parseFloat(layer.maxScale) && parseFloat(scale) < parseFloat(layer.minScale)) {\r\n              // console.log('correct!', layer.layerId);\r\n              for (let layerLegend of layer.legend) {\r\n                const layerLegendJSON = JSON.parse(JSON.stringify(layerLegend));\r\n                legendsHtml += L.Util.template(this.options.listRowTemplate, layerLegendJSON);\r\n              }\r\n            }\r\n            layersHtml += L.Util.template(this.options.layerTemplate, {\r\n              layerName: layer.layerName,\r\n              legends: legendsHtml\r\n            });\r\n          }\r\n        }\r\n\r\n        const legendHtml = L.Util.template(this.options.listTemplate, {\r\n          layers: layersHtml\r\n        });\r\n\r\n        // store calculatedlegendHtml in data\r\n        this.legendHtml = legendHtml\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n\r\n.legend {\r\n  margin-left: 10px;\r\n}\r\n\r\nul {\r\n  list-style: none;\r\n  margin-left: 0px;\r\n}\r\n\r\nul ul {\r\n  list-style: none;\r\n  margin-left: 0px;\r\n}\r\n\r\nli {\r\n  list-style: none;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"slider-wrapper\">\r\n    <input class=\"slider\"\r\n           type=\"range\"\r\n           min=\"1\"\r\n           max=\"100\"\r\n           step=\"1\"\r\n           v-model=\"opa\"\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    props: ['layer',\r\n            'layerName',\r\n            'layerId',\r\n            'opacity'\r\n    ],\r\n    data() {\r\n      return {\r\n        opa: this.$props.opacity * 100\r\n      }\r\n    },\r\n    watch: {\r\n      opa(nextOpacity) {\r\n        const payload = {\r\n                          layerName: this.$props.layerName,\r\n                          opa: nextOpacity/100\r\n                        }\r\n        // console.log('OPACITY CHANGED', payload);\r\n        this.$store.commit('setWebMapLayersOpacity', payload);\r\n      }\r\n    },\r\n    created() {\r\n      // this.initialize();\r\n    },\r\n    computed: {\r\n\r\n    },\r\n    methods: {\r\n\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n\r\n.slider-wrapper {\r\n  /*display: inline-block;*/\r\n  width: 250px;\r\n  /*height: 50px;*/\r\n  /*padding-top: 3px;\r\n  margin-bottom: 8px;*/\r\n}\r\n\r\n.slider-wrapper input {\r\n  /*padding-top: 3px;\r\n  padding-bottom: 8px;\r\n  margin-bottom: 8px;*/\r\n  width: 250px;\r\n  /*height: 20px;*/\r\n}\r\n\r\n</style>\r\n","<template>\r\n  <div>\r\n    <div class=\"div-row\">\r\n    <!-- <div class=\"input-group\"> -->\r\n    <!-- <li> -->\r\n      <a :href=\"'http://metadata.phila.gov/#home/representationdetails/' + this.bennyId\"\r\n         target=\"_blank\"\r\n         v-if=\"bennyId\"\r\n      >\r\n        <span><i class=\"fa fa-info-circle fa-2x\"></i></span>\r\n      </a>\r\n      <input :id=\"'checkbox-'+layerName\"\r\n             :class=\"{ disabled: shouldBeDisabled }\"\r\n             type=\"checkbox\"\r\n             :layerid=\"layerId\"\r\n             :checked=\"webMapActiveLayers.includes(layerName)\"\r\n             @click=\"checkboxToggle\"\r\n      >\r\n      <!-- :disabled=\"shouldBeDisabled\" -->\r\n      <label :for=\"'checkbox-'+layerName\"\r\n             :class=\"{ disabled: shouldBeDisabled, 'label-text': true }\"\r\n      >\r\n        <div class=\"layer-name\">{{ layerName }}</div>\r\n        <div class=\"tag-title\"\r\n             v-if=\"matchingTags.length > 0\"\r\n        >\r\n          Matching Tags:\r\n        </div>\r\n        <div class=\"tag-holder\"\r\n             v-if=\"matchingTags.length > 0\"\r\n             v-for=\"matchingTag in matchingTags\"\r\n        >\r\n          {{ matchingTag }}\r\n        </div>\r\n      </label>\r\n      <!-- <div class=\"layer-name\">{{layerName}}</div> -->\r\n    </div>\r\n    <legend-box v-if=\"this.$store.state.map.webMapActiveLayers.includes(layerName)\"\r\n                :layer=\"layer\"\r\n                :layerName=\"layerName\"\r\n                :layerId=\"layerId\"\r\n                :layerDefinition=\"layerDefinition\"\r\n                :legend=\"legend\"\r\n                :scales=\"this.$config.map.scales\"\r\n      >\r\n    </legend-box>\r\n    <slider v-if=\"this.$store.state.map.webMapActiveLayers.includes(layerName)\"\r\n            :layer=\"layer\"\r\n            :layerName=\"layerName\"\r\n            :layerId=\"layerId\"\r\n            :opacity=\"opacity\"\r\n    >\r\n    </slider>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n  import LegendBox from './LegendBox.vue';\r\n  import Slider from './Slider.vue';\r\n\r\n  export default {\r\n    components: {\r\n      LegendBox,\r\n      Slider\r\n    },\r\n    props: ['layer',\r\n            'layerName',\r\n            'layerId',\r\n            // minScale, maxScale, and drawingInfo are stored in layerDefinition\r\n            'layerDefinition',\r\n            'opacity',\r\n            'legend',\r\n            'tags'\r\n    ],\r\n    data() {\r\n      return {\r\n        opa: this.$props.opacity * 100\r\n      }\r\n    },\r\n    watch: {\r\n      opa(nextOpacity) {\r\n        const payload = {\r\n                          layerName: this.$props.layerName,\r\n                          opa: nextOpacity/100\r\n                        }\r\n        // console.log('OPACITY CHANGED', payload);\r\n        this.$store.commit('setWebMapLayersOpacity', payload);\r\n      },\r\n      shouldBeDisabled(nextShouldBeDisabled) {\r\n        // console.log('watch shouldBeDisabled is firing:', this.$props.layerName, nextShouldBeDisabled);\r\n        if (this.webMapActiveLayers.includes(this.$props.layerName) && nextShouldBeDisabled === true) {\r\n          this.removeFromWebMapDisplayedLayers();\r\n        } else if (this.webMapActiveLayers.includes(this.$props.layerName) && nextShouldBeDisabled === false) {\r\n          this.addToWebMapDisplayedLayers();\r\n        }\r\n      },\r\n      // inputTagsFilter(nextInputTagsFilter) {\r\n      //   this.findCurrentTags(nextInputTagsFilter);\r\n      // },\r\n    },\r\n    // mounted() {\r\n    //   // REVIEW globals. also is this still needed?\r\n    //   $(document).foundation();\r\n    // },\r\n    computed: {\r\n      matchingTags() {\r\n        let matches = [];\r\n        if (this.$props.tags !== null && this.inputTagsFilter !== '') {\r\n          for (let tag of this.$props.tags) {\r\n            if (tag.toLowerCase().includes(this.inputTagsFilter.toLowerCase())) {\r\n              matches.push(tag);\r\n            }\r\n          }\r\n        }\r\n        return matches;\r\n      },\r\n      inputTagsFilter() {\r\n        return this.$store.state.layers.inputTagsFilter;\r\n      },\r\n      scale() {\r\n        return this.$store.state.map.scale;\r\n      },\r\n      shouldBeDisabled() {\r\n        const def = this.$props.layerDefinition\r\n        if (def) {\r\n          if (def.minScale) {\r\n            if (this.scale > def.minScale) {\r\n              return true;\r\n            } else {\r\n              return false;\r\n            }\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      layerUrls() {\r\n        return this.$store.state.layers.layerUrls;\r\n      },\r\n      bennyEndpoints() {\r\n        return this.$store.state.bennyEndpoints;\r\n      },\r\n      url() {\r\n        return this.layerUrls[this.$props.layerName];\r\n      },\r\n      bennyId() {\r\n        if (Object.keys(this.bennyEndpoints).length > 0) {\r\n          const id = this.bennyEndpoints[this.url];\r\n          // const id = this.bennyEndpoints[this.url]['Metadata'];\r\n          return id;\r\n        } else {\r\n          return ' ';\r\n        }\r\n      },\r\n      webMapUrlLayer() {\r\n        return this.$store.state.map.webMapUrlLayer;\r\n      },\r\n      webMapActiveLayers() {\r\n        return this.$store.state.map.webMapActiveLayers;\r\n      },\r\n      webMapDisplayedLayers() {\r\n        return this.$store.state.map.webMapDisplayedLayers;\r\n      },\r\n      webMapGeoJson() {\r\n        return this.$store.state.map.webMapGeoJson;\r\n      }\r\n    },\r\n    methods: {\r\n      // findCurrentTags(inputTagsFilter) {\r\n      //\r\n      // },\r\n      trim(s) {\r\n        return ( s || '' ).replace( /^\\s+|\\s+$/g, '' );\r\n      },\r\n      // getGeoJson(layer) {\r\n      //   const layer2 = 'services.arcgis.com/fLeGjb7u4uXqeF9q/ArcGIS/rest/services/WasteBaskets_Big_Belly/FeatureServer/0'\r\n      //   // const url = 'http://' + layer2;\r\n      //   const url = 'http://' + this.layerUrls[layer];\r\n      //   console.log('getGeoJson is running, layer:', layer, 'url:', url);\r\n      //   const dataQuery = L.esri.query({ url });\r\n      //   dataQuery.where(\"1=1\");\r\n      //   dataQuery.run((function(error, featureCollection, response) {\r\n      //     // console.log('parcelQuery ran, activeParcelLayer:', activeParcelLayer);\r\n      //     this.didGetData(error, featureCollection, response, layer);\r\n      //   }).bind(this)\r\n      // )\r\n      // },\r\n      // didGetData(error, featureCollection, response, layer) {\r\n      //   console.log('didGetData is running, layer:', layer, 'featureCollection:', featureCollection, 'response:', response);\r\n      //   // const obj = {\r\n      //   //   'layerName': layer,\r\n      //   //   'json': response\r\n      //   let obj = this.webMapGeoJson;\r\n      //   obj[layer] = response;\r\n      //   this.$store.commit('setWebMapGeoJson', obj);\r\n      // },\r\n      checkboxToggle(e) {\r\n        console.log('checkboxToggle', e.target, e.target.id, e.target.checked);\r\n        const urlLayer = this.webMapUrlLayer;\r\n        const activeLayers = this.webMapActiveLayers;\r\n        const displayedLayers = this.webMapDisplayedLayers;\r\n        // const splitArray = e.target.id.split('-').splice(0, 1);\r\n        const targetReplace = e.target.id.replace('checkbox-', '');\r\n        if (e.target.checked) {\r\n          console.log('target checked, targetReplace:', targetReplace);\r\n          activeLayers.push(targetReplace);\r\n          displayedLayers.push(targetReplace);\r\n          // activeLayers.push(e.target.id.split('-')[1]);\r\n          // displayedLayers.push(e.target.id.split('-')[1]);\r\n          if (activeLayers.length === 1) {\r\n            this.$store.commit('setWebMapUrlLayer', targetReplace);\r\n            // this.$controller.handleCheckboxClick(targetReplace);\r\n          }\r\n          // if (!Object.keys(this.webMapGeoJson).includes(targetReplace)) {\r\n          //   this.getGeoJson(targetReplace);\r\n          // }\r\n        } else {\r\n          console.log('target not checked');\r\n          const activeIndex = activeLayers.indexOf(targetReplace);\r\n          // const activeIndex = activeLayers.indexOf(e.target.id.split('-')[1]);\r\n          if (activeIndex >= 0) {\r\n            activeLayers.splice(activeIndex, 1);\r\n          }\r\n          const displayedIndex = displayedLayers.indexOf(targetReplace);\r\n          // const displayedIndex = displayedLayers.indexOf(e.target.id.split('-')[1]);\r\n          if (displayedIndex >= 0) {\r\n            displayedLayers.splice(displayedIndex, 1);\r\n          }\r\n          // this.$store.commit('setIntersectingFeatures', []);\r\n          if (urlLayer === targetReplace) {\r\n            this.$store.commit('setWebMapUrlLayer', null);\r\n            // this.$controller.handleCheckboxUnClick(targetReplace);\r\n          }\r\n        }\r\n        this.$store.commit('setWebMapActiveLayers', activeLayers);\r\n        this.$store.commit('setWebMapDisplayedLayers', displayedLayers);\r\n      },\r\n      removeFromWebMapDisplayedLayers() {\r\n        const displayedLayers = this.webMapDisplayedLayers;\r\n        const index = displayedLayers.indexOf(this.$props.layerName);\r\n        // console.log('layer', this.$props.layerName, 'is active, but now should not be displayed, index:', index);\r\n        if (index >= 0) {\r\n          displayedLayers.splice(index, 1);\r\n        }\r\n        this.$store.commit('setWebMapDisplayedLayers', displayedLayers);\r\n      },\r\n      addToWebMapDisplayedLayers() {\r\n        // console.log('layer', this.$props.layerName, 'is active, and now should be displayed');\r\n        const displayedLayers = this.webMapDisplayedLayers;\r\n        displayedLayers.push(this.$props.layerName);\r\n        this.$store.commit('setWebMapDisplayedLayers', displayedLayers);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  .sliderDiv {\r\n    height: 60px;\r\n  }\r\n\r\n  .flex {\r\n    margin-bottom: 16px;\r\n  }\r\n\r\n  .metadata-link {\r\n    display: inline-block;\r\n    height: 10px;\r\n    width: 10px;\r\n    /*border: solid;\r\n    border-width: 1px;*/\r\n  }\r\n\r\n  .download-select {\r\n    width: 200px;\r\n  }\r\n\r\n  .div-row {\r\n    position: relative;\r\n    margin-bottom: 12px;\r\n  }\r\n\r\n  /* input[type=\"checkbox\"] {\r\n    width: 25px;\r\n    height: 25px;\r\n    position: absolute;\r\n    top: 50%;\r\n    margin-top: -10px;\r\n    margin-left: 32px;\r\n    cursor: pointer;\r\n  } */\r\n\r\n  a {\r\n    position: absolute;\r\n    /* top: 50%; */\r\n    /* margin-top: -10px; */\r\n    /*margin-left: 25px;*/\r\n  }\r\n\r\n  input[type=checkbox]+label[for] {\r\n    font-size: 16px;\r\n  }\r\n\r\n  input[type=checkbox]+label::before {\r\n    position: absolute;\r\n    margin-top: -12px;\r\n    font-size: 30px;\r\n    padding-right: 5px;\r\n  }\r\n\r\n  .disabled {\r\n    color: #d3d3d3 !important;\r\n  }\r\n\r\n  input[type=checkbox]+label.disabled::before {\r\n    color: #d3d3d3;\r\n  }\r\n\r\n  .label-text {\r\n    /* position: absolute; */\r\n    display: inline-block;\r\n    /* margin-top: 4px; */\r\n    margin-left: 0px;\r\n    padding-left: 30px;\r\n  }\r\n\r\n  .layer-name {\r\n    font-weight: normal;\r\n    vertical-align: middle;\r\n    display: inline-block;\r\n    margin-left: 30px;\r\n    margin-bottom: 6px;\r\n  }\r\n\r\n  .tag-title {\r\n    padding-left: 30px;\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    font-size: 14px;\r\n    color: red;\r\n  }\r\n\r\n  .tag-holder {\r\n    /* display: inline-block; */\r\n    padding-left: 30px;\r\n    font-weight: normal;\r\n    font-size: 14px;\r\n    color: red;\r\n  }\r\n\r\n\r\n</style>\r\n","import AddressCandidateList from './components/AddressCandidateList.vue';\r\nimport AddressInput from './components/AddressInput.vue';\r\nimport AnyHeader from './components/AnyHeader.vue';\r\nimport Badge from './components/Badge.vue';\r\nimport BadgeCustom from './components/BadgeCustom.vue';\r\nimport ButtonComp from './components/ButtonComp.vue';\r\nimport Callout from './components/Callout.vue';\r\nimport CollectionSummary from './components/CollectionSummary.vue';\r\nimport Division from './components/Division.vue';\r\nimport fullScreenTopicsToggleTab from './components/FullScreenTopicsToggleTab.vue';\r\nimport Greeting from './components/Greeting.vue';\r\nimport HorizontalTable from './components/HorizontalTable.vue';\r\nimport HorizontalTableGroup from './components/HorizontalTableGroup.vue';\r\nimport HorizontalTableRow from './components/HorizontalTableRow.vue';\r\nimport Image from './components/Image.vue';\r\nimport List from './components/List.vue';\r\nimport OverlayToggleGroup from './components/OverlayToggleGroup.vue';\r\nimport Paragraph from './components/Paragraph.vue';\r\nimport SpanComp from './components/SpanComp.vue';\r\nimport TabGroup from './components/TabGroup.vue';\r\nimport VerticalTable from './components/VerticalTable.vue';\r\nimport Topic from './components/Topic.vue';\r\nimport TopicSet from './components/TopicSet.vue';\r\nimport TopicComponent from './components/TopicComponent.vue';\r\nimport TopicComponentGroup from './components/TopicComponentGroup.vue';\r\n\r\nimport Checkbox from './components/Checkbox.vue';\r\nimport LegendBox from './components/LegendBox.vue';\r\nimport Slider from './components/Slider.vue';\r\n\r\nexports.AddressCandidateList = AddressCandidateList;\r\nexports.AddressInput = AddressInput;\r\nexports.AnyHeader = AnyHeader;\r\nexports.Badge = Badge;\r\nexports.BadgeCustom = BadgeCustom;\r\nexports.ButtonComp = ButtonComp;\r\nexports.Callout = Callout;\r\nexports.CollectionSummary = CollectionSummary;\r\nexports.Division = Division;\r\nexports.FullScreenTopicsToggleTab = fullScreenTopicsToggleTab;\r\nexports.Greeting = Greeting;\r\nexports.HorizontalTable = HorizontalTable;\r\nexports.HorizontalTableGroup = HorizontalTableGroup;\r\nexports.HorizontalTableRow = HorizontalTableRow;\r\nexports.Image = Image;\r\nexports.List = List;\r\nexports.OverlayToggleGroup = OverlayToggleGroup;\r\nexports.Paragraph = Paragraph;\r\nexports.SpanComp = SpanComp;\r\nexports.TabGroup = TabGroup;\r\nexports.VerticalTable = VerticalTable;\r\nexports.Topic = Topic;\r\nexports.TopicSet = TopicSet;\r\nexports.TopicComponent = TopicComponent;\r\nexports.TopicComponentGroup = TopicComponentGroup;\r\n\r\nexports.Checkbox = Checkbox;\r\nexports.LegendBox = LegendBox;\r\nexports.Slider = Slider;\r\n"],"names":["const","let","this","tag","index","items","layer","legendsHtml","layerLegend","layerLegendJSON","Image"],"mappings":"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"}